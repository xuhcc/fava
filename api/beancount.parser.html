
<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <title>beancount.parser &#8212; Fava  documentation</title>
    <link rel="stylesheet" href="../_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/language_data.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="beancount.plugins" href="beancount.plugins.html" />
    <link rel="prev" title="beancount.ops" href="beancount.ops.html" />
   
  <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <div class="section" id="module-beancount.parser">
<span id="beancount-parser"></span><h1>beancount.parser<a class="headerlink" href="#module-beancount.parser" title="Permalink to this headline">¶</a></h1>
<p>Parser module for beancount input files.</p>
<div class="section" id="module-beancount.parser._parser">
<span id="beancount-parser-parser"></span><h2>beancount.parser._parser<a class="headerlink" href="#module-beancount.parser._parser" title="Permalink to this headline">¶</a></h2>
<p>Beancount parser extension module</p>
<dl class="function">
<dt id="beancount.parser._parser.get_yyfilename">
<code class="sig-prename descclassname">beancount.parser._parser.</code><code class="sig-name descname">get_yyfilename</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#beancount.parser._parser.get_yyfilename" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="beancount.parser._parser.get_yylineno">
<code class="sig-prename descclassname">beancount.parser._parser.</code><code class="sig-name descname">get_yylineno</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#beancount.parser._parser.get_yylineno" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="beancount.parser._parser.lexer_finalize">
<code class="sig-prename descclassname">beancount.parser._parser.</code><code class="sig-name descname">lexer_finalize</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#beancount.parser._parser.lexer_finalize" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="beancount.parser._parser.lexer_initialize">
<code class="sig-prename descclassname">beancount.parser._parser.</code><code class="sig-name descname">lexer_initialize</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#beancount.parser._parser.lexer_initialize" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="beancount.parser._parser.lexer_next">
<code class="sig-prename descclassname">beancount.parser._parser.</code><code class="sig-name descname">lexer_next</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#beancount.parser._parser.lexer_next" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="beancount.parser._parser.parse_file">
<code class="sig-prename descclassname">beancount.parser._parser.</code><code class="sig-name descname">parse_file</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#beancount.parser._parser.parse_file" title="Permalink to this definition">¶</a></dt>
<dd><p>Parse the filename, calling back methods on the builder.
Your builder is responsible to accumulating results.
If you pass in ‘-‘ for filename, stdin is parsed.</p>
</dd></dl>

<dl class="function">
<dt id="beancount.parser._parser.parse_string">
<code class="sig-prename descclassname">beancount.parser._parser.</code><code class="sig-name descname">parse_string</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#beancount.parser._parser.parse_string" title="Permalink to this definition">¶</a></dt>
<dd><p>Parse the given string, calling back methods on the builder.
Your builder is responsible to accumulating results.</p>
</dd></dl>

</div>
<div class="section" id="module-beancount.parser.booking">
<span id="beancount-parser-booking"></span><h2>beancount.parser.booking<a class="headerlink" href="#module-beancount.parser.booking" title="Permalink to this headline">¶</a></h2>
<p>Algorithms for ‘booking’ inventory, that is, the process of finding a
matching lot when reducing the content of an inventory.</p>
<dl class="class">
<dt id="beancount.parser.booking.BookingError">
<em class="property">class </em><code class="sig-prename descclassname">beancount.parser.booking.</code><code class="sig-name descname">BookingError</code><span class="sig-paren">(</span><em class="sig-param">source</em>, <em class="sig-param">message</em>, <em class="sig-param">entry</em><span class="sig-paren">)</span><a class="headerlink" href="#beancount.parser.booking.BookingError" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="beancount.parser.booking.book">
<code class="sig-prename descclassname">beancount.parser.booking.</code><code class="sig-name descname">book</code><span class="sig-paren">(</span><em class="sig-param">incomplete_entries</em>, <em class="sig-param">options_map</em><span class="sig-paren">)</span><a class="headerlink" href="#beancount.parser.booking.book" title="Permalink to this definition">¶</a></dt>
<dd><p>Book inventory lots and complete all positions with incomplete numbers.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>incomplete_entries</strong> – A list of directives, with some postings possibly left
with incomplete amounts as produced by the parser.</p></li>
<li><p><strong>options_map</strong> – An options dict as produced by the parser.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><dl class="simple">
<dt>A pair of</dt><dd><p>entries: A list of completed entries with all their postings completed.
errors: New errors produced during interpolation.</p>
</dd>
</dl>
</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="beancount.parser.booking.validate_inventory_booking">
<code class="sig-prename descclassname">beancount.parser.booking.</code><code class="sig-name descname">validate_inventory_booking</code><span class="sig-paren">(</span><em class="sig-param">entries</em>, <em class="sig-param">unused_options_map</em>, <em class="sig-param">booking_methods</em><span class="sig-paren">)</span><a class="headerlink" href="#beancount.parser.booking.validate_inventory_booking" title="Permalink to this definition">¶</a></dt>
<dd><p>Validate that no position at cost is allowed to go negative.</p>
<p>This routine checks that when a posting reduces a position, existing or not,
that the subsequent inventory does not result in a position with a negative
number of units. A negative number of units would only be required for short
trades of trading spreads on futures, and right now this is not supported.
It would not be difficult to support this, however, but we want to be strict
about it, because being pedantic about this is otherwise a great way to
detect user data entry mistakes.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>entries</strong> – A list of directives.</p></li>
<li><p><strong>unused_options_map</strong> – An options map.</p></li>
<li><p><strong>booking_methods</strong> – A mapping of account name to booking method, accumulated
in the main loop.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A list of errors.</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="beancount.parser.booking.validate_missing_eliminated">
<code class="sig-prename descclassname">beancount.parser.booking.</code><code class="sig-name descname">validate_missing_eliminated</code><span class="sig-paren">(</span><em class="sig-param">entries</em>, <em class="sig-param">unused_options_map</em><span class="sig-paren">)</span><a class="headerlink" href="#beancount.parser.booking.validate_missing_eliminated" title="Permalink to this definition">¶</a></dt>
<dd><p>Validate that all the missing bits of postings have been eliminated.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>entries</strong> – A list of directives.</p></li>
<li><p><strong>unused_options_map</strong> – An options map.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A list of errors.</p>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="module-beancount.parser.booking_full">
<span id="beancount-parser-booking-full"></span><h2>beancount.parser.booking_full<a class="headerlink" href="#module-beancount.parser.booking_full" title="Permalink to this headline">¶</a></h2>
<p>Full (new) booking implementation.</p>
<p>Problem description:</p>
<p>Interpolation and booking feed on each other, that is, numbers filled in from
interpolation might affect the booking process, and numbers derived from the
booking process may help carry out interpolation that would otherwise be
under-defined. Here’s an example of interpolation helping the booking process:</p>
<p>Assume the ante-inventory of Assets:Investments contains two lots of shares of
HOOL, one at 100.00 USD and the other at 101.00 USD and apply this transaction:</p>
<blockquote>
<div><dl class="simple">
<dt>2015-09-30 *</dt><dd><p>Assets:Investments   -10 HOOL {USD}
Assets:Cash               1000 USD
Income:Gains              -200 USD</p>
</dd>
</dl>
</div></blockquote>
<p>Interpolation is unambiguously able to back out a cost of 100 USD / HOOL, which
would then result in an unambiguous booking result.</p>
<p>On the other hand, consider this transaction:</p>
<blockquote>
<div><dl class="simple">
<dt>2015-09-30 *</dt><dd><p>Assets:Investments    -10 HOOL {USD}
Assets:Cash               1000 USD
Income:Gains</p>
</dd>
</dl>
</div></blockquote>
<p>Now the interpolation cannot succeed. If the Assets:Investments account is
configured to use the FIFO method, the 10 oldest shares would be selected for
the cost, and we could then interpolate the capital gains correctly.</p>
<p>First observation: The second case is much more frequent than the first, and the
first is easily resolved manually by requiring a particular cost be specified.
Moreover, in many cases there isn’t just a single lot of shares to be reduced
from and figuring out the correct set of shares given a target cost is an
underspecified problem.</p>
<p>Second observation: Booking can only be achieved for inventory reductions, not
for augmentations. Therefore, we should carry out booking on inventory
reductions and fail early if reduction is undefined there, and leave inventory
augmentations with missing numbers undefined, so that interpolation can fill
them in at a later stage.</p>
<p>Note that one case we’d like to but may not be able to handle is of a reduction
with interpolated price, like this:</p>
<blockquote>
<div><dl class="simple">
<dt>2015-09-30 *</dt><dd><p>Assets:Investments        -10 HOOL {100.00 # USD}
Expenses:Commission      9.95 USD
Assets:Cash            990.05 USD</p>
</dd>
</dl>
</div></blockquote>
<p>Therefore we choose to</p>
<ol class="arabic simple">
<li><p>Carry out booking first, on inventory reductions only, and leave inventory
augmentations as they are, possibly undefined. The ‘cost’ attributed of
booked postings are converted from CostSpec to Cost. Augmented postings with
missing amounts are left as CostSpec instances in order to allow for
interpolation of total vs. per-unit amount.</p></li>
<li><p>Compute interpolations on the resulting postings. Undefined costs for
inventory augmentations may be filled in by interpolations at this stage (if
possible).</p></li>
<li><p>Finally, convert the interpolated CostSpec instances to Cost instances.</p></li>
</ol>
<p>Improving on this algorithm would require running a loop over the booking and
interpolation steps until all numbers are resolved or no more inference can
occur. We may consider that for later, as an experimental feature. My hunch is
that there are so few cases for which this would be useful that we won’t bother
improving on the algorithm above.</p>
<dl class="class">
<dt id="beancount.parser.booking_full.CategorizationError">
<em class="property">class </em><code class="sig-prename descclassname">beancount.parser.booking_full.</code><code class="sig-name descname">CategorizationError</code><span class="sig-paren">(</span><em class="sig-param">source</em>, <em class="sig-param">message</em>, <em class="sig-param">entry</em><span class="sig-paren">)</span><a class="headerlink" href="#beancount.parser.booking_full.CategorizationError" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="class">
<dt id="beancount.parser.booking_full.InterpolationError">
<em class="property">class </em><code class="sig-prename descclassname">beancount.parser.booking_full.</code><code class="sig-name descname">InterpolationError</code><span class="sig-paren">(</span><em class="sig-param">source</em>, <em class="sig-param">message</em>, <em class="sig-param">entry</em><span class="sig-paren">)</span><a class="headerlink" href="#beancount.parser.booking_full.InterpolationError" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="class">
<dt id="beancount.parser.booking_full.MissingType">
<em class="property">class </em><code class="sig-prename descclassname">beancount.parser.booking_full.</code><code class="sig-name descname">MissingType</code><a class="headerlink" href="#beancount.parser.booking_full.MissingType" title="Permalink to this definition">¶</a></dt>
<dd><p>The type of missing number.</p>
<dl class="attribute">
<dt id="beancount.parser.booking_full.MissingType.COST_PER">
<code class="sig-name descname">COST_PER</code><em class="property"> = 2</em><a class="headerlink" href="#beancount.parser.booking_full.MissingType.COST_PER" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="beancount.parser.booking_full.MissingType.COST_TOTAL">
<code class="sig-name descname">COST_TOTAL</code><em class="property"> = 3</em><a class="headerlink" href="#beancount.parser.booking_full.MissingType.COST_TOTAL" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="beancount.parser.booking_full.MissingType.PRICE">
<code class="sig-name descname">PRICE</code><em class="property"> = 4</em><a class="headerlink" href="#beancount.parser.booking_full.MissingType.PRICE" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="beancount.parser.booking_full.MissingType.UNITS">
<code class="sig-name descname">UNITS</code><em class="property"> = 1</em><a class="headerlink" href="#beancount.parser.booking_full.MissingType.UNITS" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="beancount.parser.booking_full.ReductionError">
<em class="property">class </em><code class="sig-prename descclassname">beancount.parser.booking_full.</code><code class="sig-name descname">ReductionError</code><span class="sig-paren">(</span><em class="sig-param">source</em>, <em class="sig-param">message</em>, <em class="sig-param">entry</em><span class="sig-paren">)</span><a class="headerlink" href="#beancount.parser.booking_full.ReductionError" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="class">
<dt id="beancount.parser.booking_full.Refer">
<em class="property">class </em><code class="sig-prename descclassname">beancount.parser.booking_full.</code><code class="sig-name descname">Refer</code><span class="sig-paren">(</span><em class="sig-param">index</em>, <em class="sig-param">units_currency</em>, <em class="sig-param">cost_currency</em>, <em class="sig-param">price_currency</em><span class="sig-paren">)</span><a class="headerlink" href="#beancount.parser.booking_full.Refer" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="class">
<dt id="beancount.parser.booking_full.SelfReduxError">
<em class="property">class </em><code class="sig-prename descclassname">beancount.parser.booking_full.</code><code class="sig-name descname">SelfReduxError</code><span class="sig-paren">(</span><em class="sig-param">source</em>, <em class="sig-param">message</em>, <em class="sig-param">entry</em><span class="sig-paren">)</span><a class="headerlink" href="#beancount.parser.booking_full.SelfReduxError" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="beancount.parser.booking_full.book">
<code class="sig-prename descclassname">beancount.parser.booking_full.</code><code class="sig-name descname">book</code><span class="sig-paren">(</span><em class="sig-param">entries</em>, <em class="sig-param">options_map</em>, <em class="sig-param">methods</em><span class="sig-paren">)</span><a class="headerlink" href="#beancount.parser.booking_full.book" title="Permalink to this definition">¶</a></dt>
<dd><p>Interpolate missing data from the entries using the full historical algorithm.
See the internal implementation _book() for details.
This method only stripes some of the return values.</p>
<p>See _book() for arguments and return values.</p>
</dd></dl>

<dl class="function">
<dt id="beancount.parser.booking_full.book_reductions">
<code class="sig-prename descclassname">beancount.parser.booking_full.</code><code class="sig-name descname">book_reductions</code><span class="sig-paren">(</span><em class="sig-param">entry</em>, <em class="sig-param">group_postings</em>, <em class="sig-param">balances</em>, <em class="sig-param">methods</em><span class="sig-paren">)</span><a class="headerlink" href="#beancount.parser.booking_full.book_reductions" title="Permalink to this definition">¶</a></dt>
<dd><p>Book inventory reductions against the ante-balances.</p>
<p>This function accepts a dict of (account, Inventory balance) and for each
posting that is a reduction against its inventory, attempts to find a
corresponding lot or list of lots to reduce the balance with.</p>
<ul class="simple">
<li><p>For reducing lots, the CostSpec instance of the posting is replaced by a
Cost instance.</p></li>
<li><p>For augmenting lots, the CostSpec instance of the posting is left alone,
except for its date, which is inherited from the parent Transaction.</p></li>
</ul>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>entry</strong> – An instance of Transaction. This is only used to refer to when
logging errors.</p></li>
<li><p><strong>group_postings</strong> – A list of Posting instances for the group.</p></li>
<li><p><strong>balances</strong> – A dict of account name to inventory contents.</p></li>
<li><p><strong>methods</strong> – A mapping of account name to their corresponding booking
method enum.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><dl>
<dt>A pair of</dt><dd><dl class="simple">
<dt>booked_postings: A list of booked postings, with reducing lots resolved</dt><dd><p>against specific position in the corresponding accounts’
ante-inventory balances. Note single reducing posting in the input may
result in multiple postings in the output. Also note that augmenting
postings held-at-cost will still refer to ‘cost’ instances of
CostSpec, left to be interpolated later.</p>
</dd>
</dl>
<p>errors: A list of errors, if there were any.</p>
</dd>
</dl>
</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="beancount.parser.booking_full.categorize_by_currency">
<code class="sig-prename descclassname">beancount.parser.booking_full.</code><code class="sig-name descname">categorize_by_currency</code><span class="sig-paren">(</span><em class="sig-param">entry</em>, <em class="sig-param">balances</em><span class="sig-paren">)</span><a class="headerlink" href="#beancount.parser.booking_full.categorize_by_currency" title="Permalink to this definition">¶</a></dt>
<dd><p>Group the postings by the currency they declare.</p>
<p>This is used to prepare the postings for the next stages: Interpolation and
booking will then be carried out separately on each currency group. At the
outset of this routine, we should have distinct groups of currencies without
any ambiguities regarding which currency they need to balance against.</p>
<p>Here’s how this works.</p>
<ul class="simple">
<li><p>First we apply the constraint that cost-currency and price-currency must
match, if there is both a cost and a price. This reduces the space of
possibilities somewahte.</p></li>
<li><p>If the currency is explicitly specified, we put the posting in that
currency’s bucket.</p></li>
<li><p>If not, we have a few methods left to disambiguate the currency:</p>
<ol class="arabic simple">
<li><p>We look at the remaining postings… if they are all of a single
currency, the posting must be in that currency too.</p></li>
<li><p>If we cannot do that, we inspect the contents of the inventory of the
account for the posting. If all the contents are of a single currency,
we use that one.</p></li>
</ol>
</li>
</ul>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>postings</strong> – A list of incomplete postings to categorize.</p></li>
<li><p><strong>balances</strong> – A dict of currency to inventory contents before the transaction is
applied.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><p>A list of (currency string, list of tuples) items describing each postings
and its interpolated currencies, and a list of generated errors for
currency interpolation. The entry’s original postings are left unmodified.
Each tuple in the value-list contains:</p>
<blockquote>
<div><p>index: The posting index in the original entry.
units_currency: The interpolated currency for units.
cost_currency: The interpolated currency for cost.
price_currency: The interpolated currency for price.</p>
</div></blockquote>
</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="beancount.parser.booking_full.compute_cost_number">
<code class="sig-prename descclassname">beancount.parser.booking_full.</code><code class="sig-name descname">compute_cost_number</code><span class="sig-paren">(</span><em class="sig-param">costspec</em>, <em class="sig-param">units</em><span class="sig-paren">)</span><a class="headerlink" href="#beancount.parser.booking_full.compute_cost_number" title="Permalink to this definition">¶</a></dt>
<dd><p>Given a CostSpec, return the cost number, if possible to compute.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>costspec</strong> – A parsed instance of CostSpec.</p></li>
<li><p><strong>units</strong> – An instance of Amount for the units of the position.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>If it is not possible to calculate the cost, return None.
Otherwise, returns a Decimal instance, the per-unit cost.</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="beancount.parser.booking_full.convert_costspec_to_cost">
<code class="sig-prename descclassname">beancount.parser.booking_full.</code><code class="sig-name descname">convert_costspec_to_cost</code><span class="sig-paren">(</span><em class="sig-param">posting</em><span class="sig-paren">)</span><a class="headerlink" href="#beancount.parser.booking_full.convert_costspec_to_cost" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert an instance of CostSpec to Cost, if present on the posting.</p>
<p>If the posting has no cost, it itself is just returned.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>posting</strong> – An instance of Posting.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>An instance of Posting with a possibly replaced ‘cost’ attribute.</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="beancount.parser.booking_full.get_bucket_currency">
<code class="sig-prename descclassname">beancount.parser.booking_full.</code><code class="sig-name descname">get_bucket_currency</code><span class="sig-paren">(</span><em class="sig-param">refer</em><span class="sig-paren">)</span><a class="headerlink" href="#beancount.parser.booking_full.get_bucket_currency" title="Permalink to this definition">¶</a></dt>
<dd><p>Given currency references for a posting, return the bucket currency.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>refer</strong> – An instance of Refer.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A currency string.</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="beancount.parser.booking_full.has_self_reduction">
<code class="sig-prename descclassname">beancount.parser.booking_full.</code><code class="sig-name descname">has_self_reduction</code><span class="sig-paren">(</span><em class="sig-param">postings</em>, <em class="sig-param">methods</em><span class="sig-paren">)</span><a class="headerlink" href="#beancount.parser.booking_full.has_self_reduction" title="Permalink to this definition">¶</a></dt>
<dd><p>Return true if the postings potentially reduce each other at cost.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>postings</strong> – A list of postings with uninterpolated CostSpec cost instances.</p></li>
<li><p><strong>methods</strong> – A mapping of account name to their corresponding booking
method.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A boolean, true if there’s a potential for self-reduction.</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="beancount.parser.booking_full.interpolate_group">
<code class="sig-prename descclassname">beancount.parser.booking_full.</code><code class="sig-name descname">interpolate_group</code><span class="sig-paren">(</span><em class="sig-param">postings</em>, <em class="sig-param">balances</em>, <em class="sig-param">currency</em>, <em class="sig-param">tolerances</em><span class="sig-paren">)</span><a class="headerlink" href="#beancount.parser.booking_full.interpolate_group" title="Permalink to this definition">¶</a></dt>
<dd><p>Interpolate missing numbers in the set of postings.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>postings</strong> – A list of Posting instances.</p></li>
<li><p><strong>balances</strong> – A dict of account to its ante-inventory.</p></li>
<li><p><strong>currency</strong> – The weight currency of this group, used for reporting errors.</p></li>
<li><p><strong>tolerances</strong> – A dict of currency to tolerance values.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><dl class="simple">
<dt>A tuple of</dt><dd><p>postings: A lit of new posting instances.
errors: A list of errors generated during interpolation.
interpolated: A boolean, true if we did have to interpolate.</p>
</dd>
</dl>
<p>In the case of an error, this returns the original list of postings, which
is still incomplete. If an error is returned, you should probably skip the
transaction altogether, or just not include the postings in it. (An
alternative behaviour would be to return only the list of valid postings,
but that would likely result in an unbalanced transaction. We do it this
way by choice.)</p>
</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="beancount.parser.booking_full.replace_currencies">
<code class="sig-prename descclassname">beancount.parser.booking_full.</code><code class="sig-name descname">replace_currencies</code><span class="sig-paren">(</span><em class="sig-param">postings</em>, <em class="sig-param">refer_groups</em><span class="sig-paren">)</span><a class="headerlink" href="#beancount.parser.booking_full.replace_currencies" title="Permalink to this definition">¶</a></dt>
<dd><p>Replace resolved currencies in the entry’s Postings.</p>
<p>This essentially applies the findings of categorize_by_currency() to produce
new postings with all currencies resolved.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>postings</strong> – A list of Posting instances to replace.</p></li>
<li><p><strong>refer_groups</strong> – A list of (currency, list of posting references) items as
returned by categorize_by_currency().</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A new list of items of (currency, list of Postings), postings for which the
currencies have been replaced by their interpolated currency values.</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="beancount.parser.booking_full.unique_label">
<code class="sig-prename descclassname">beancount.parser.booking_full.</code><code class="sig-name descname">unique_label</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#beancount.parser.booking_full.unique_label" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a globally unique label for cost entries.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></p>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="module-beancount.parser.booking_method">
<span id="beancount-parser-booking-method"></span><h2>beancount.parser.booking_method<a class="headerlink" href="#module-beancount.parser.booking_method" title="Permalink to this headline">¶</a></h2>
<p>Implementations of all the particular booking methods.
This code is used by the full booking algorithm.</p>
<dl class="class">
<dt id="beancount.parser.booking_method.AmbiguousMatchError">
<em class="property">class </em><code class="sig-prename descclassname">beancount.parser.booking_method.</code><code class="sig-name descname">AmbiguousMatchError</code><span class="sig-paren">(</span><em class="sig-param">source</em>, <em class="sig-param">message</em>, <em class="sig-param">entry</em><span class="sig-paren">)</span><a class="headerlink" href="#beancount.parser.booking_method.AmbiguousMatchError" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="beancount.parser.booking_method.booking_method_AVERAGE">
<code class="sig-prename descclassname">beancount.parser.booking_method.</code><code class="sig-name descname">booking_method_AVERAGE</code><span class="sig-paren">(</span><em class="sig-param">entry</em>, <em class="sig-param">posting</em>, <em class="sig-param">matches</em><span class="sig-paren">)</span><a class="headerlink" href="#beancount.parser.booking_method.booking_method_AVERAGE" title="Permalink to this definition">¶</a></dt>
<dd><p>AVERAGE booking method implementation.</p>
</dd></dl>

<dl class="function">
<dt id="beancount.parser.booking_method.booking_method_FIFO">
<code class="sig-prename descclassname">beancount.parser.booking_method.</code><code class="sig-name descname">booking_method_FIFO</code><span class="sig-paren">(</span><em class="sig-param">entry</em>, <em class="sig-param">posting</em>, <em class="sig-param">matches</em><span class="sig-paren">)</span><a class="headerlink" href="#beancount.parser.booking_method.booking_method_FIFO" title="Permalink to this definition">¶</a></dt>
<dd><p>FIFO booking method implementation.</p>
</dd></dl>

<dl class="function">
<dt id="beancount.parser.booking_method.booking_method_LIFO">
<code class="sig-prename descclassname">beancount.parser.booking_method.</code><code class="sig-name descname">booking_method_LIFO</code><span class="sig-paren">(</span><em class="sig-param">entry</em>, <em class="sig-param">posting</em>, <em class="sig-param">matches</em><span class="sig-paren">)</span><a class="headerlink" href="#beancount.parser.booking_method.booking_method_LIFO" title="Permalink to this definition">¶</a></dt>
<dd><p>LIFO booking method implementation.</p>
</dd></dl>

<dl class="function">
<dt id="beancount.parser.booking_method.booking_method_NONE">
<code class="sig-prename descclassname">beancount.parser.booking_method.</code><code class="sig-name descname">booking_method_NONE</code><span class="sig-paren">(</span><em class="sig-param">entry</em>, <em class="sig-param">posting</em>, <em class="sig-param">matches</em><span class="sig-paren">)</span><a class="headerlink" href="#beancount.parser.booking_method.booking_method_NONE" title="Permalink to this definition">¶</a></dt>
<dd><p>NONE booking method implementation.</p>
</dd></dl>

<dl class="function">
<dt id="beancount.parser.booking_method.booking_method_STRICT">
<code class="sig-prename descclassname">beancount.parser.booking_method.</code><code class="sig-name descname">booking_method_STRICT</code><span class="sig-paren">(</span><em class="sig-param">entry</em>, <em class="sig-param">posting</em>, <em class="sig-param">matches</em><span class="sig-paren">)</span><a class="headerlink" href="#beancount.parser.booking_method.booking_method_STRICT" title="Permalink to this definition">¶</a></dt>
<dd><p>Strict booking method.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>entry</strong> – The parent Transaction instance.</p></li>
<li><p><strong>posting</strong> – An instance of Posting, the reducing posting which we’re
attempting to match.</p></li>
<li><p><strong>matches</strong> – A list of matching Position instances from the ante-inventory.
Those positions are known to already match the ‘posting’ spec.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><dl>
<dt>A triple of</dt><dd><dl class="simple">
<dt>booked_reductions: A list of matched Posting instances, whose ‘cost’</dt><dd><p>attributes are ensured to be of type Cost.</p>
</dd>
</dl>
<p>errors: A list of errors to be generated.
insufficient: A boolean, true if we could not find enough matches</p>
<blockquote>
<div><p>to fulfill the reduction.</p>
</div></blockquote>
</dd>
</dl>
</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="beancount.parser.booking_method.handle_ambiguous_matches">
<code class="sig-prename descclassname">beancount.parser.booking_method.</code><code class="sig-name descname">handle_ambiguous_matches</code><span class="sig-paren">(</span><em class="sig-param">entry</em>, <em class="sig-param">posting</em>, <em class="sig-param">matches</em>, <em class="sig-param">method</em><span class="sig-paren">)</span><a class="headerlink" href="#beancount.parser.booking_method.handle_ambiguous_matches" title="Permalink to this definition">¶</a></dt>
<dd><p>Handle ambiguous matches by dispatching to a particular method.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>entry</strong> – The parent Transaction instance.</p></li>
<li><p><strong>posting</strong> – An instance of Posting, the reducing posting which we’re
attempting to match.</p></li>
<li><p><strong>matches</strong> – A list of matching Position instances from the ante-inventory.
Those positions are known to already match the ‘posting’ spec.</p></li>
<li><p><strong>methods</strong> – A mapping of account name to their corresponding booking
method.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><dl>
<dt>A pair of</dt><dd><dl class="simple">
<dt>booked_reductions: A list of matched Posting instances, whose ‘cost’</dt><dd><p>attributes are ensured to be of type Cost.</p>
</dd>
</dl>
<p>errors: A list of errors to be generated.</p>
</dd>
</dl>
</p>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="module-beancount.parser.cmptest">
<span id="beancount-parser-cmptest"></span><h2>beancount.parser.cmptest<a class="headerlink" href="#module-beancount.parser.cmptest" title="Permalink to this headline">¶</a></h2>
<p>Support utillities for testing scripts.</p>
<dl class="class">
<dt id="beancount.parser.cmptest.TestCase">
<em class="property">class </em><code class="sig-prename descclassname">beancount.parser.cmptest.</code><code class="sig-name descname">TestCase</code><span class="sig-paren">(</span><em class="sig-param">methodName='runTest'</em><span class="sig-paren">)</span><a class="headerlink" href="#beancount.parser.cmptest.TestCase" title="Permalink to this definition">¶</a></dt>
<dd><dl class="method">
<dt id="beancount.parser.cmptest.TestCase.assertEqualEntries">
<code class="sig-name descname">assertEqualEntries</code><span class="sig-paren">(</span><em class="sig-param">expected_entries</em>, <em class="sig-param">actual_entries</em><span class="sig-paren">)</span><a class="headerlink" href="#beancount.parser.cmptest.TestCase.assertEqualEntries" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="beancount.parser.cmptest.TestCase.assertExcludesEntries">
<code class="sig-name descname">assertExcludesEntries</code><span class="sig-paren">(</span><em class="sig-param">subset_entries</em>, <em class="sig-param">entries</em><span class="sig-paren">)</span><a class="headerlink" href="#beancount.parser.cmptest.TestCase.assertExcludesEntries" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="beancount.parser.cmptest.TestCase.assertIncludesEntries">
<code class="sig-name descname">assertIncludesEntries</code><span class="sig-paren">(</span><em class="sig-param">subset_entries</em>, <em class="sig-param">entries</em><span class="sig-paren">)</span><a class="headerlink" href="#beancount.parser.cmptest.TestCase.assertIncludesEntries" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="exception">
<dt id="beancount.parser.cmptest.TestError">
<em class="property">exception </em><code class="sig-prename descclassname">beancount.parser.cmptest.</code><code class="sig-name descname">TestError</code><a class="headerlink" href="#beancount.parser.cmptest.TestError" title="Permalink to this definition">¶</a></dt>
<dd><p>Errors within the test implementation itself. These should never occur.</p>
</dd></dl>

<dl class="function">
<dt id="beancount.parser.cmptest.assertEqualEntries">
<code class="sig-prename descclassname">beancount.parser.cmptest.</code><code class="sig-name descname">assertEqualEntries</code><span class="sig-paren">(</span><em class="sig-param">expected_entries</em>, <em class="sig-param">actual_entries</em>, <em class="sig-param">failfunc=&lt;function fail&gt;</em>, <em class="sig-param">allow_incomplete=False</em><span class="sig-paren">)</span><a class="headerlink" href="#beancount.parser.cmptest.assertEqualEntries" title="Permalink to this definition">¶</a></dt>
<dd><p>Compare two lists of entries exactly and print missing entries verbosely if
they occur.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>expected_entries</strong> – Either a list of directives or a string, in which case the
string is run through beancount.parser.parse_string() and the resulting
list is used.</p></li>
<li><p><strong>actual_entries</strong> – Same treatment as expected_entries, the other list of
directives to compare to.</p></li>
<li><p><strong>failfunc</strong> – A function to call on failure.</p></li>
<li><p><strong>allow_incomplete</strong> – A boolean, true if we allow incomplete inputs and perform
light-weight booking.</p></li>
</ul>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><strong>AssertionError</strong> – If the exception fails.</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="beancount.parser.cmptest.assertExcludesEntries">
<code class="sig-prename descclassname">beancount.parser.cmptest.</code><code class="sig-name descname">assertExcludesEntries</code><span class="sig-paren">(</span><em class="sig-param">subset_entries</em>, <em class="sig-param">entries</em>, <em class="sig-param">failfunc=&lt;function fail&gt;</em>, <em class="sig-param">allow_incomplete=False</em><span class="sig-paren">)</span><a class="headerlink" href="#beancount.parser.cmptest.assertExcludesEntries" title="Permalink to this definition">¶</a></dt>
<dd><p>Check that subset_entries is not included in entries and print extra entries.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>subset_entries</strong> – Either a list of directives or a string, in which case the
string is run through beancount.parser.parse_string() and the resulting
list is used.</p></li>
<li><p><strong>entries</strong> – Same treatment as subset_entries, the other list of
directives to compare to.</p></li>
<li><p><strong>failfunc</strong> – A function to call on failure.</p></li>
<li><p><strong>allow_incomplete</strong> – A boolean, true if we allow incomplete inputs and perform
light-weight booking.</p></li>
</ul>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><strong>AssertionError</strong> – If the exception fails.</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="beancount.parser.cmptest.assertIncludesEntries">
<code class="sig-prename descclassname">beancount.parser.cmptest.</code><code class="sig-name descname">assertIncludesEntries</code><span class="sig-paren">(</span><em class="sig-param">subset_entries</em>, <em class="sig-param">entries</em>, <em class="sig-param">failfunc=&lt;function fail&gt;</em>, <em class="sig-param">allow_incomplete=False</em><span class="sig-paren">)</span><a class="headerlink" href="#beancount.parser.cmptest.assertIncludesEntries" title="Permalink to this definition">¶</a></dt>
<dd><p>Check that subset_entries is included in entries and print missing entries.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>subset_entries</strong> – Either a list of directives or a string, in which case the
string is run through beancount.parser.parse_string() and the resulting
list is used.</p></li>
<li><p><strong>entries</strong> – Same treatment as subset_entries, the other list of
directives to compare to.</p></li>
<li><p><strong>failfunc</strong> – A function to call on failure.</p></li>
<li><p><strong>allow_incomplete</strong> – A boolean, true if we allow incomplete inputs and perform
light-weight booking.</p></li>
</ul>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><strong>AssertionError</strong> – If the exception fails.</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="beancount.parser.cmptest.read_string_or_entries">
<code class="sig-prename descclassname">beancount.parser.cmptest.</code><code class="sig-name descname">read_string_or_entries</code><span class="sig-paren">(</span><em class="sig-param">entries_or_str</em>, <em class="sig-param">allow_incomplete=False</em><span class="sig-paren">)</span><a class="headerlink" href="#beancount.parser.cmptest.read_string_or_entries" title="Permalink to this definition">¶</a></dt>
<dd><p>Read a string of entries or just entries.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>entries_or_str</strong> – Either a list of directives, or a string containing directives.</p></li>
<li><p><strong>allow_incomplete</strong> – A boolean, true if we allow incomplete inputs and perform
light-weight booking.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A list of directives.</p>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="module-beancount.parser.grammar">
<span id="beancount-parser-grammar"></span><h2>beancount.parser.grammar<a class="headerlink" href="#module-beancount.parser.grammar" title="Permalink to this headline">¶</a></h2>
<p>Builder for Beancount grammar.</p>
<dl class="class">
<dt id="beancount.parser.grammar.Builder">
<em class="property">class </em><code class="sig-prename descclassname">beancount.parser.grammar.</code><code class="sig-name descname">Builder</code><span class="sig-paren">(</span><em class="sig-param">filename</em><span class="sig-paren">)</span><a class="headerlink" href="#beancount.parser.grammar.Builder" title="Permalink to this definition">¶</a></dt>
<dd><p>A builder used by the lexer and grammar parser as callbacks to create
the data objects corresponding to rules parsed from the input file.</p>
<dl class="method">
<dt id="beancount.parser.grammar.Builder.amount">
<code class="sig-name descname">amount</code><span class="sig-paren">(</span><em class="sig-param">number</em>, <em class="sig-param">currency</em><span class="sig-paren">)</span><a class="headerlink" href="#beancount.parser.grammar.Builder.amount" title="Permalink to this definition">¶</a></dt>
<dd><p>Process an amount grammar rule.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>number</strong> – a Decimal instance, the number of the amount.</p></li>
<li><p><strong>currency</strong> – a currency object (a str, really, see CURRENCY above)</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>An instance of Amount.</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="beancount.parser.grammar.Builder.balance">
<code class="sig-name descname">balance</code><span class="sig-paren">(</span><em class="sig-param">filename</em>, <em class="sig-param">lineno</em>, <em class="sig-param">date</em>, <em class="sig-param">account</em>, <em class="sig-param">amount</em>, <em class="sig-param">tolerance</em>, <em class="sig-param">kvlist</em><span class="sig-paren">)</span><a class="headerlink" href="#beancount.parser.grammar.Builder.balance" title="Permalink to this definition">¶</a></dt>
<dd><p>Process an assertion directive.</p>
<p>We produce no errors here by default. We replace the failing ones in the
routine that does the verification later one, that these have succeeded
or failed.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>filename</strong> – The current filename.</p></li>
<li><p><strong>lineno</strong> – The current line number.</p></li>
<li><p><strong>date</strong> – A datetime object.</p></li>
<li><p><strong>account</strong> – A string, the account to balance.</p></li>
<li><p><strong>amount</strong> – The expected amount, to be checked.</p></li>
<li><p><strong>tolerance</strong> – The tolerance number.</p></li>
<li><p><strong>kvlist</strong> – a list of KeyValue instances.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A new Balance object.</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="beancount.parser.grammar.Builder.build_grammar_error">
<code class="sig-name descname">build_grammar_error</code><span class="sig-paren">(</span><em class="sig-param">filename</em>, <em class="sig-param">lineno</em>, <em class="sig-param">exc_value</em>, <em class="sig-param">exc_type=None</em>, <em class="sig-param">exc_traceback=None</em><span class="sig-paren">)</span><a class="headerlink" href="#beancount.parser.grammar.Builder.build_grammar_error" title="Permalink to this definition">¶</a></dt>
<dd><p>Build a grammar error and appends it to the list of pending errors.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>filename</strong> – The current filename</p></li>
<li><p><strong>lineno</strong> – The current line number</p></li>
<li><p><strong>excvalue</strong> – The exception value, or a str, the message of the error.</p></li>
<li><p><strong>exc_type</strong> – An exception type, if an exception occurred.</p></li>
<li><p><strong>exc_traceback</strong> – A traceback object.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="beancount.parser.grammar.Builder.close">
<code class="sig-name descname">close</code><span class="sig-paren">(</span><em class="sig-param">filename</em>, <em class="sig-param">lineno</em>, <em class="sig-param">date</em>, <em class="sig-param">account</em>, <em class="sig-param">kvlist</em><span class="sig-paren">)</span><a class="headerlink" href="#beancount.parser.grammar.Builder.close" title="Permalink to this definition">¶</a></dt>
<dd><p>Process a close directive.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>filename</strong> – The current filename.</p></li>
<li><p><strong>lineno</strong> – The current line number.</p></li>
<li><p><strong>date</strong> – A datetime object.</p></li>
<li><p><strong>account</strong> – A string, the name of the account.</p></li>
<li><p><strong>kvlist</strong> – a list of KeyValue instances.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A new Close object.</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="beancount.parser.grammar.Builder.commodity">
<code class="sig-name descname">commodity</code><span class="sig-paren">(</span><em class="sig-param">filename</em>, <em class="sig-param">lineno</em>, <em class="sig-param">date</em>, <em class="sig-param">currency</em>, <em class="sig-param">kvlist</em><span class="sig-paren">)</span><a class="headerlink" href="#beancount.parser.grammar.Builder.commodity" title="Permalink to this definition">¶</a></dt>
<dd><p>Process a close directive.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>filename</strong> – The current filename.</p></li>
<li><p><strong>lineno</strong> – The current line number.</p></li>
<li><p><strong>date</strong> – A datetime object.</p></li>
<li><p><strong>currency</strong> – A string, the commodity being declared.</p></li>
<li><p><strong>kvlist</strong> – a list of KeyValue instances.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A new Close object.</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="beancount.parser.grammar.Builder.compound_amount">
<code class="sig-name descname">compound_amount</code><span class="sig-paren">(</span><em class="sig-param">number_per</em>, <em class="sig-param">number_total</em>, <em class="sig-param">currency</em><span class="sig-paren">)</span><a class="headerlink" href="#beancount.parser.grammar.Builder.compound_amount" title="Permalink to this definition">¶</a></dt>
<dd><p>Process an amount grammar rule.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>number_per</strong> – a Decimal instance, the number of the cost per share.</p></li>
<li><p><strong>number_total</strong> – a Decimal instance, the number of the cost over all shares.</p></li>
<li><p><strong>currency</strong> – a currency object (a str, really, see CURRENCY above)</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A triple of (Decimal, Decimal, currency string) to be processed further when
creating the final per-unit cost number.</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="beancount.parser.grammar.Builder.cost_merge">
<code class="sig-name descname">cost_merge</code><span class="sig-paren">(</span><em class="sig-param">_</em><span class="sig-paren">)</span><a class="headerlink" href="#beancount.parser.grammar.Builder.cost_merge" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a ‘merge cost’ token.</p>
</dd></dl>

<dl class="method">
<dt id="beancount.parser.grammar.Builder.cost_spec">
<code class="sig-name descname">cost_spec</code><span class="sig-paren">(</span><em class="sig-param">cost_comp_list</em>, <em class="sig-param">is_total</em><span class="sig-paren">)</span><a class="headerlink" href="#beancount.parser.grammar.Builder.cost_spec" title="Permalink to this definition">¶</a></dt>
<dd><p>Process a cost_spec grammar rule.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>cost_comp_list</strong> – A list of CompoundAmount, a datetime.date, or
label ID strings.</p></li>
<li><p><strong>is_total</strong> – Assume only the total cost is specified; reject the &lt;number&gt; # &lt;number&gt;
syntax, that is, no compound amounts may be specified. This is used to support
the {{…}} syntax.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A cost-info tuple of CompoundAmount, lot date and label string. Any of these
may be set to a sentinel indicating “unset”.</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="beancount.parser.grammar.Builder.custom">
<code class="sig-name descname">custom</code><span class="sig-paren">(</span><em class="sig-param">filename</em>, <em class="sig-param">lineno</em>, <em class="sig-param">date</em>, <em class="sig-param">dir_type</em>, <em class="sig-param">custom_values</em>, <em class="sig-param">kvlist</em><span class="sig-paren">)</span><a class="headerlink" href="#beancount.parser.grammar.Builder.custom" title="Permalink to this definition">¶</a></dt>
<dd><p>Process a custom directive.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>filename</strong> – the current filename.</p></li>
<li><p><strong>lineno</strong> – the current line number.</p></li>
<li><p><strong>date</strong> – a datetime object.</p></li>
<li><p><strong>dir_type</strong> – A string, a type for the custom directive being parsed.</p></li>
<li><p><strong>custom_values</strong> – A list of the various tokens seen on the same line.</p></li>
<li><p><strong>kvlist</strong> – a list of KeyValue instances.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A new Custom object.</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="beancount.parser.grammar.Builder.custom_value">
<code class="sig-name descname">custom_value</code><span class="sig-paren">(</span><em class="sig-param">value</em>, <em class="sig-param">dtype=None</em><span class="sig-paren">)</span><a class="headerlink" href="#beancount.parser.grammar.Builder.custom_value" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a custom value object, along with its type.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>value</strong> – One of the accepted custom values.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A pair of (value, dtype) where ‘dtype’ is the datatype is that of the
value.</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="beancount.parser.grammar.Builder.dcupdate">
<code class="sig-name descname">dcupdate</code><span class="sig-paren">(</span><em class="sig-param">number</em>, <em class="sig-param">currency</em><span class="sig-paren">)</span><a class="headerlink" href="#beancount.parser.grammar.Builder.dcupdate" title="Permalink to this definition">¶</a></dt>
<dd><p>Update the display context.</p>
</dd></dl>

<dl class="method">
<dt id="beancount.parser.grammar.Builder.document">
<code class="sig-name descname">document</code><span class="sig-paren">(</span><em class="sig-param">filename</em>, <em class="sig-param">lineno</em>, <em class="sig-param">date</em>, <em class="sig-param">account</em>, <em class="sig-param">document_filename</em>, <em class="sig-param">tags_links</em>, <em class="sig-param">kvlist</em><span class="sig-paren">)</span><a class="headerlink" href="#beancount.parser.grammar.Builder.document" title="Permalink to this definition">¶</a></dt>
<dd><p>Process a document directive.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>filename</strong> – the current filename.</p></li>
<li><p><strong>lineno</strong> – the current line number.</p></li>
<li><p><strong>date</strong> – a datetime object.</p></li>
<li><p><strong>account</strong> – an Account instance.</p></li>
<li><p><strong>document_filename</strong> – a str, the name of the document file.</p></li>
<li><p><strong>tags_links</strong> – The current TagsLinks accumulator.</p></li>
<li><p><strong>kvlist</strong> – a list of KeyValue instances.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A new Document object.</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="beancount.parser.grammar.Builder.event">
<code class="sig-name descname">event</code><span class="sig-paren">(</span><em class="sig-param">filename</em>, <em class="sig-param">lineno</em>, <em class="sig-param">date</em>, <em class="sig-param">event_type</em>, <em class="sig-param">description</em>, <em class="sig-param">kvlist</em><span class="sig-paren">)</span><a class="headerlink" href="#beancount.parser.grammar.Builder.event" title="Permalink to this definition">¶</a></dt>
<dd><p>Process an event directive.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>filename</strong> – the current filename.</p></li>
<li><p><strong>lineno</strong> – the current line number.</p></li>
<li><p><strong>date</strong> – a datetime object.</p></li>
<li><p><strong>event_type</strong> – a str, the name of the event type.</p></li>
<li><p><strong>description</strong> – a str, the event value, the contents.</p></li>
<li><p><strong>kvlist</strong> – a list of KeyValue instances.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A new Event object.</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="beancount.parser.grammar.Builder.finalize">
<code class="sig-name descname">finalize</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#beancount.parser.grammar.Builder.finalize" title="Permalink to this definition">¶</a></dt>
<dd><p>Finalize the parser, check for final errors and return the triple.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p><dl class="simple">
<dt>A triple of</dt><dd><p>entries: A list of parsed directives, which may need completion.
errors: A list of errors, hopefully empty.
options_map: A dict of options.</p>
</dd>
</dl>
</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="beancount.parser.grammar.Builder.finalize_tags_links">
<code class="sig-name descname">finalize_tags_links</code><span class="sig-paren">(</span><em class="sig-param">tags</em>, <em class="sig-param">links</em><span class="sig-paren">)</span><a class="headerlink" href="#beancount.parser.grammar.Builder.finalize_tags_links" title="Permalink to this definition">¶</a></dt>
<dd><p>Finally amend tags and links and return final objects to be inserted.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>tags</strong> – A set of tag strings (warning: this gets mutated in-place).</p></li>
<li><p><strong>links</strong> – A set of link strings.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A sanitized pair of (tags, links).</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="beancount.parser.grammar.Builder.get_entries">
<code class="sig-name descname">get_entries</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#beancount.parser.grammar.Builder.get_entries" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the accumulated entries.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>A list of sorted directives.</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="beancount.parser.grammar.Builder.get_invalid_account">
<code class="sig-name descname">get_invalid_account</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#beancount.parser.grammar.Builder.get_invalid_account" title="Permalink to this definition">¶</a></dt>
<dd><p>See base class.</p>
</dd></dl>

<dl class="method">
<dt id="beancount.parser.grammar.Builder.get_long_string_maxlines">
<code class="sig-name descname">get_long_string_maxlines</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#beancount.parser.grammar.Builder.get_long_string_maxlines" title="Permalink to this definition">¶</a></dt>
<dd><p>See base class.</p>
</dd></dl>

<dl class="method">
<dt id="beancount.parser.grammar.Builder.get_options">
<code class="sig-name descname">get_options</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#beancount.parser.grammar.Builder.get_options" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the final options map.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>A dict of option names to options.</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="beancount.parser.grammar.Builder.handle_list">
<code class="sig-name descname">handle_list</code><span class="sig-paren">(</span><em class="sig-param">object_list</em>, <em class="sig-param">new_object</em><span class="sig-paren">)</span><a class="headerlink" href="#beancount.parser.grammar.Builder.handle_list" title="Permalink to this definition">¶</a></dt>
<dd><p>Handle a recursive list grammar rule, generically.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>object_list</strong> – the current list of objects.</p></li>
<li><p><strong>new_object</strong> – the new object to be added.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The new, updated list of objects.</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="beancount.parser.grammar.Builder.include">
<code class="sig-name descname">include</code><span class="sig-paren">(</span><em class="sig-param">filename</em>, <em class="sig-param">lineno</em>, <em class="sig-param">include_filename</em><span class="sig-paren">)</span><a class="headerlink" href="#beancount.parser.grammar.Builder.include" title="Permalink to this definition">¶</a></dt>
<dd><p>Process an include directive.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>filename</strong> – current filename.</p></li>
<li><p><strong>lineno</strong> – current line number.</p></li>
<li><p><strong>include_name</strong> – A string, the name of the file to include.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="beancount.parser.grammar.Builder.key_value">
<code class="sig-name descname">key_value</code><span class="sig-paren">(</span><em class="sig-param">key</em>, <em class="sig-param">value</em><span class="sig-paren">)</span><a class="headerlink" href="#beancount.parser.grammar.Builder.key_value" title="Permalink to this definition">¶</a></dt>
<dd><p>Process a document directive.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>filename</strong> – The current filename.</p></li>
<li><p><strong>lineno</strong> – The current line number.</p></li>
<li><p><strong>date</strong> – A datetime object.</p></li>
<li><p><strong>account</strong> – A string, the account the document relates to.</p></li>
<li><p><strong>document_filename</strong> – A str, the name of the document file.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A new KeyValue object.</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="beancount.parser.grammar.Builder.note">
<code class="sig-name descname">note</code><span class="sig-paren">(</span><em class="sig-param">filename</em>, <em class="sig-param">lineno</em>, <em class="sig-param">date</em>, <em class="sig-param">account</em>, <em class="sig-param">comment</em>, <em class="sig-param">kvlist</em><span class="sig-paren">)</span><a class="headerlink" href="#beancount.parser.grammar.Builder.note" title="Permalink to this definition">¶</a></dt>
<dd><p>Process a note directive.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>filename</strong> – The current filename.</p></li>
<li><p><strong>lineno</strong> – The current line number.</p></li>
<li><p><strong>date</strong> – A datetime object.</p></li>
<li><p><strong>account</strong> – A string, the account to attach the note to.</p></li>
<li><p><strong>comment</strong> – A str, the note’s comments contents.</p></li>
<li><p><strong>kvlist</strong> – a list of KeyValue instances.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A new Note object.</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="beancount.parser.grammar.Builder.open">
<code class="sig-name descname">open</code><span class="sig-paren">(</span><em class="sig-param">filename</em>, <em class="sig-param">lineno</em>, <em class="sig-param">date</em>, <em class="sig-param">account</em>, <em class="sig-param">currencies</em>, <em class="sig-param">booking_str</em>, <em class="sig-param">kvlist</em><span class="sig-paren">)</span><a class="headerlink" href="#beancount.parser.grammar.Builder.open" title="Permalink to this definition">¶</a></dt>
<dd><p>Process an open directive.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>filename</strong> – The current filename.</p></li>
<li><p><strong>lineno</strong> – The current line number.</p></li>
<li><p><strong>date</strong> – A datetime object.</p></li>
<li><p><strong>account</strong> – A string, the name of the account.</p></li>
<li><p><strong>currencies</strong> – A list of constraint currencies.</p></li>
<li><p><strong>booking_str</strong> – A string, the booking method, or None if none was specified.</p></li>
<li><p><strong>kvlist</strong> – a list of KeyValue instances.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A new Open object.</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="beancount.parser.grammar.Builder.option">
<code class="sig-name descname">option</code><span class="sig-paren">(</span><em class="sig-param">filename</em>, <em class="sig-param">lineno</em>, <em class="sig-param">key</em>, <em class="sig-param">value</em><span class="sig-paren">)</span><a class="headerlink" href="#beancount.parser.grammar.Builder.option" title="Permalink to this definition">¶</a></dt>
<dd><p>Process an option directive.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>filename</strong> – current filename.</p></li>
<li><p><strong>lineno</strong> – current line number.</p></li>
<li><p><strong>key</strong> – option’s key (str)</p></li>
<li><p><strong>value</strong> – option’s value</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="beancount.parser.grammar.Builder.pad">
<code class="sig-name descname">pad</code><span class="sig-paren">(</span><em class="sig-param">filename</em>, <em class="sig-param">lineno</em>, <em class="sig-param">date</em>, <em class="sig-param">account</em>, <em class="sig-param">source_account</em>, <em class="sig-param">kvlist</em><span class="sig-paren">)</span><a class="headerlink" href="#beancount.parser.grammar.Builder.pad" title="Permalink to this definition">¶</a></dt>
<dd><p>Process a pad directive.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>filename</strong> – The current filename.</p></li>
<li><p><strong>lineno</strong> – The current line number.</p></li>
<li><p><strong>date</strong> – A datetime object.</p></li>
<li><p><strong>account</strong> – A string, the account to be padded.</p></li>
<li><p><strong>source_account</strong> – A string, the account to pad from.</p></li>
<li><p><strong>kvlist</strong> – a list of KeyValue instances.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A new Pad object.</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="beancount.parser.grammar.Builder.pipe_deprecated_error">
<code class="sig-name descname">pipe_deprecated_error</code><span class="sig-paren">(</span><em class="sig-param">filename</em>, <em class="sig-param">lineno</em><span class="sig-paren">)</span><a class="headerlink" href="#beancount.parser.grammar.Builder.pipe_deprecated_error" title="Permalink to this definition">¶</a></dt>
<dd><p>Issue a ‘Pipe deprecated’ error.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>filename</strong> – The current filename</p></li>
<li><p><strong>lineno</strong> – The current line number</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="beancount.parser.grammar.Builder.plugin">
<code class="sig-name descname">plugin</code><span class="sig-paren">(</span><em class="sig-param">filename</em>, <em class="sig-param">lineno</em>, <em class="sig-param">plugin_name</em>, <em class="sig-param">plugin_config</em><span class="sig-paren">)</span><a class="headerlink" href="#beancount.parser.grammar.Builder.plugin" title="Permalink to this definition">¶</a></dt>
<dd><p>Process a plugin directive.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>filename</strong> – current filename.</p></li>
<li><p><strong>lineno</strong> – current line number.</p></li>
<li><p><strong>plugin_name</strong> – A string, the name of the plugin module to import.</p></li>
<li><p><strong>plugin_config</strong> – A string or None, an optional configuration string to
pass in to the plugin module.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="beancount.parser.grammar.Builder.popmeta">
<code class="sig-name descname">popmeta</code><span class="sig-paren">(</span><em class="sig-param">key</em><span class="sig-paren">)</span><a class="headerlink" href="#beancount.parser.grammar.Builder.popmeta" title="Permalink to this definition">¶</a></dt>
<dd><p>Removed a key off the current set of stacks.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>key</strong> – A string, a key to be removed from the meta dict.</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="beancount.parser.grammar.Builder.poptag">
<code class="sig-name descname">poptag</code><span class="sig-paren">(</span><em class="sig-param">tag</em><span class="sig-paren">)</span><a class="headerlink" href="#beancount.parser.grammar.Builder.poptag" title="Permalink to this definition">¶</a></dt>
<dd><p>Pop a tag off the current set of stacks.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>tag</strong> – A string, a tag to be removed from the current set of tags.</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="beancount.parser.grammar.Builder.posting">
<code class="sig-name descname">posting</code><span class="sig-paren">(</span><em class="sig-param">filename</em>, <em class="sig-param">lineno</em>, <em class="sig-param">account</em>, <em class="sig-param">units</em>, <em class="sig-param">cost</em>, <em class="sig-param">price</em>, <em class="sig-param">istotal</em>, <em class="sig-param">flag</em><span class="sig-paren">)</span><a class="headerlink" href="#beancount.parser.grammar.Builder.posting" title="Permalink to this definition">¶</a></dt>
<dd><p>Process a posting grammar rule.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>filename</strong> – the current filename.</p></li>
<li><p><strong>lineno</strong> – the current line number.</p></li>
<li><p><strong>account</strong> – A string, the account of the posting.</p></li>
<li><p><strong>units</strong> – An instance of Amount for the units.</p></li>
<li><p><strong>cost</strong> – An instance of CostSpec for the cost.</p></li>
<li><p><strong>price</strong> – Either None, or an instance of Amount that is the cost of the position.</p></li>
<li><p><strong>istotal</strong> – A bool, True if the price is for the total amount being parsed, or
False if the price is for each lot of the position.</p></li>
<li><p><strong>flag</strong> – A string, one-character, the flag associated with this posting.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A new Posting object, with no parent entry.</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="beancount.parser.grammar.Builder.price">
<code class="sig-name descname">price</code><span class="sig-paren">(</span><em class="sig-param">filename</em>, <em class="sig-param">lineno</em>, <em class="sig-param">date</em>, <em class="sig-param">currency</em>, <em class="sig-param">amount</em>, <em class="sig-param">kvlist</em><span class="sig-paren">)</span><a class="headerlink" href="#beancount.parser.grammar.Builder.price" title="Permalink to this definition">¶</a></dt>
<dd><p>Process a price directive.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>filename</strong> – the current filename.</p></li>
<li><p><strong>lineno</strong> – the current line number.</p></li>
<li><p><strong>date</strong> – a datetime object.</p></li>
<li><p><strong>currency</strong> – the currency to be priced.</p></li>
<li><p><strong>amount</strong> – an instance of Amount, that is the price of the currency.</p></li>
<li><p><strong>kvlist</strong> – a list of KeyValue instances.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A new Price object.</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="beancount.parser.grammar.Builder.pushmeta">
<code class="sig-name descname">pushmeta</code><span class="sig-paren">(</span><em class="sig-param">key</em>, <em class="sig-param">value</em><span class="sig-paren">)</span><a class="headerlink" href="#beancount.parser.grammar.Builder.pushmeta" title="Permalink to this definition">¶</a></dt>
<dd><p>Set a metadata field on the current key-value pairs to be added to transactions.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>key_value</strong> – A KeyValue instance, to be added to the dict of metadata.</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="beancount.parser.grammar.Builder.pushtag">
<code class="sig-name descname">pushtag</code><span class="sig-paren">(</span><em class="sig-param">tag</em><span class="sig-paren">)</span><a class="headerlink" href="#beancount.parser.grammar.Builder.pushtag" title="Permalink to this definition">¶</a></dt>
<dd><p>Push a tag on the current set of tags.</p>
<p>Note that this does not need to be stack ordered.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>tag</strong> – A string, a tag to be added.</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="beancount.parser.grammar.Builder.query">
<code class="sig-name descname">query</code><span class="sig-paren">(</span><em class="sig-param">filename</em>, <em class="sig-param">lineno</em>, <em class="sig-param">date</em>, <em class="sig-param">query_name</em>, <em class="sig-param">query_string</em>, <em class="sig-param">kvlist</em><span class="sig-paren">)</span><a class="headerlink" href="#beancount.parser.grammar.Builder.query" title="Permalink to this definition">¶</a></dt>
<dd><p>Process a document directive.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>filename</strong> – the current filename.</p></li>
<li><p><strong>lineno</strong> – the current line number.</p></li>
<li><p><strong>date</strong> – a datetime object.</p></li>
<li><p><strong>query_name</strong> – a str, the name of the query.</p></li>
<li><p><strong>query_string</strong> – a str, the SQL query itself.</p></li>
<li><p><strong>kvlist</strong> – a list of KeyValue instances.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A new Query object.</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="beancount.parser.grammar.Builder.store_result">
<code class="sig-name descname">store_result</code><span class="sig-paren">(</span><em class="sig-param">entries</em><span class="sig-paren">)</span><a class="headerlink" href="#beancount.parser.grammar.Builder.store_result" title="Permalink to this definition">¶</a></dt>
<dd><p>Start rule stores the final result here.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>entries</strong> – A list of entries to store.</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="beancount.parser.grammar.Builder.tag_link_LINK">
<code class="sig-name descname">tag_link_LINK</code><span class="sig-paren">(</span><em class="sig-param">tags_links</em>, <em class="sig-param">link</em><span class="sig-paren">)</span><a class="headerlink" href="#beancount.parser.grammar.Builder.tag_link_LINK" title="Permalink to this definition">¶</a></dt>
<dd><p>Add a link to the TagsLinks accumulator.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>tags_links</strong> – The current TagsLinks accumulator.</p></li>
<li><p><strong>link</strong> – A string, the new link to insert.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>An updated TagsLinks instance.</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="beancount.parser.grammar.Builder.tag_link_STRING">
<code class="sig-name descname">tag_link_STRING</code><span class="sig-paren">(</span><em class="sig-param">tags_links</em>, <em class="sig-param">string</em><span class="sig-paren">)</span><a class="headerlink" href="#beancount.parser.grammar.Builder.tag_link_STRING" title="Permalink to this definition">¶</a></dt>
<dd><p>Add a string to the TagsLinks accumulator.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>tags_links</strong> – The current TagsLinks accumulator.</p></li>
<li><p><strong>string</strong> – A string, the new string to insert in the list.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>An updated TagsLinks instance.</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="beancount.parser.grammar.Builder.tag_link_TAG">
<code class="sig-name descname">tag_link_TAG</code><span class="sig-paren">(</span><em class="sig-param">tags_links</em>, <em class="sig-param">tag</em><span class="sig-paren">)</span><a class="headerlink" href="#beancount.parser.grammar.Builder.tag_link_TAG" title="Permalink to this definition">¶</a></dt>
<dd><p>Add a tag to the TagsLinks accumulator.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>tags_links</strong> – The current TagsLinks accumulator.</p></li>
<li><p><strong>tag</strong> – A string, the new tag to insert.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>An updated TagsLinks instance.</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="beancount.parser.grammar.Builder.tag_link_new">
<code class="sig-name descname">tag_link_new</code><span class="sig-paren">(</span><em class="sig-param">_</em><span class="sig-paren">)</span><a class="headerlink" href="#beancount.parser.grammar.Builder.tag_link_new" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a new TagsLinks instance.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>An instance of TagsLinks, initialized with expected attributes.</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="beancount.parser.grammar.Builder.transaction">
<code class="sig-name descname">transaction</code><span class="sig-paren">(</span><em class="sig-param">filename</em>, <em class="sig-param">lineno</em>, <em class="sig-param">date</em>, <em class="sig-param">flag</em>, <em class="sig-param">txn_strings</em>, <em class="sig-param">tags_links</em>, <em class="sig-param">posting_or_kv_list</em><span class="sig-paren">)</span><a class="headerlink" href="#beancount.parser.grammar.Builder.transaction" title="Permalink to this definition">¶</a></dt>
<dd><p>Process a transaction directive.</p>
<p>All the postings of the transaction are available at this point, and so the
the transaction is balanced here, incomplete postings are completed with the
appropriate position, and errors are being accumulated on the builder to be
reported later on.</p>
<p>This is the main routine that takes up most of the parsing time; be very
careful with modifications here, they have an impact on performance.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>filename</strong> – the current filename.</p></li>
<li><p><strong>lineno</strong> – the current line number.</p></li>
<li><p><strong>date</strong> – a datetime object.</p></li>
<li><p><strong>flag</strong> – a str, one-character, the flag associated with this transaction.</p></li>
<li><p><strong>txn_strings</strong> – A list of strings, possibly empty, possibly longer.</p></li>
<li><p><strong>tags_links</strong> – A TagsLinks namedtuple of tags, and/or links.</p></li>
<li><p><strong>posting_or_kv_list</strong> – a list of Posting or KeyValue instances, to be inserted in
this transaction, or None, if no postings have been declared.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A new Transaction object.</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="beancount.parser.grammar.Builder.unpack_txn_strings">
<code class="sig-name descname">unpack_txn_strings</code><span class="sig-paren">(</span><em class="sig-param">txn_strings</em>, <em class="sig-param">meta</em><span class="sig-paren">)</span><a class="headerlink" href="#beancount.parser.grammar.Builder.unpack_txn_strings" title="Permalink to this definition">¶</a></dt>
<dd><p>Unpack a tags_links accumulator to its payee and narration fields.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>txn_strings</strong> – A list of strings.</p></li>
<li><p><strong>meta</strong> – A metadata dict for errors generated in this routine.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A pair of (payee, narration) strings or None objects, or None, if
there was an error.</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="beancount.parser.grammar.CompoundAmount">
<em class="property">class </em><code class="sig-prename descclassname">beancount.parser.grammar.</code><code class="sig-name descname">CompoundAmount</code><span class="sig-paren">(</span><em class="sig-param">number_per</em>, <em class="sig-param">number_total</em>, <em class="sig-param">currency</em><span class="sig-paren">)</span><a class="headerlink" href="#beancount.parser.grammar.CompoundAmount" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="class">
<dt id="beancount.parser.grammar.DeprecatedError">
<em class="property">class </em><code class="sig-prename descclassname">beancount.parser.grammar.</code><code class="sig-name descname">DeprecatedError</code><span class="sig-paren">(</span><em class="sig-param">source</em>, <em class="sig-param">message</em>, <em class="sig-param">entry</em><span class="sig-paren">)</span><a class="headerlink" href="#beancount.parser.grammar.DeprecatedError" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="class">
<dt id="beancount.parser.grammar.KeyValue">
<em class="property">class </em><code class="sig-prename descclassname">beancount.parser.grammar.</code><code class="sig-name descname">KeyValue</code><span class="sig-paren">(</span><em class="sig-param">key</em>, <em class="sig-param">value</em><span class="sig-paren">)</span><a class="headerlink" href="#beancount.parser.grammar.KeyValue" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="class">
<dt id="beancount.parser.grammar.ParserError">
<em class="property">class </em><code class="sig-prename descclassname">beancount.parser.grammar.</code><code class="sig-name descname">ParserError</code><span class="sig-paren">(</span><em class="sig-param">source</em>, <em class="sig-param">message</em>, <em class="sig-param">entry</em><span class="sig-paren">)</span><a class="headerlink" href="#beancount.parser.grammar.ParserError" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="class">
<dt id="beancount.parser.grammar.ParserSyntaxError">
<em class="property">class </em><code class="sig-prename descclassname">beancount.parser.grammar.</code><code class="sig-name descname">ParserSyntaxError</code><span class="sig-paren">(</span><em class="sig-param">source</em>, <em class="sig-param">message</em>, <em class="sig-param">entry</em><span class="sig-paren">)</span><a class="headerlink" href="#beancount.parser.grammar.ParserSyntaxError" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="class">
<dt id="beancount.parser.grammar.TagsLinks">
<em class="property">class </em><code class="sig-prename descclassname">beancount.parser.grammar.</code><code class="sig-name descname">TagsLinks</code><span class="sig-paren">(</span><em class="sig-param">tags</em>, <em class="sig-param">links</em><span class="sig-paren">)</span><a class="headerlink" href="#beancount.parser.grammar.TagsLinks" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="class">
<dt id="beancount.parser.grammar.ValueType">
<em class="property">class </em><code class="sig-prename descclassname">beancount.parser.grammar.</code><code class="sig-name descname">ValueType</code><span class="sig-paren">(</span><em class="sig-param">value</em>, <em class="sig-param">dtype</em><span class="sig-paren">)</span><a class="headerlink" href="#beancount.parser.grammar.ValueType" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="beancount.parser.grammar.valid_account_regexp">
<code class="sig-prename descclassname">beancount.parser.grammar.</code><code class="sig-name descname">valid_account_regexp</code><span class="sig-paren">(</span><em class="sig-param">options</em><span class="sig-paren">)</span><a class="headerlink" href="#beancount.parser.grammar.valid_account_regexp" title="Permalink to this definition">¶</a></dt>
<dd><p>Build a regexp to validate account names from the options.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>options</strong> – A dict of options, as per beancount.parser.options.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A string, a regular expression that will match all account names.</p>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="module-beancount.parser.hashsrc">
<span id="beancount-parser-hashsrc"></span><h2>beancount.parser.hashsrc<a class="headerlink" href="#module-beancount.parser.hashsrc" title="Permalink to this headline">¶</a></h2>
<p>Compute a hash of the source files in order to warn when the source goes out of date.</p>
<dl class="function">
<dt id="beancount.parser.hashsrc.check_parser_source_files">
<code class="sig-prename descclassname">beancount.parser.hashsrc.</code><code class="sig-name descname">check_parser_source_files</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#beancount.parser.hashsrc.check_parser_source_files" title="Permalink to this definition">¶</a></dt>
<dd><p>Check the extension module’s source hash and issue a warning if the
current source differs from that of the module.</p>
<p>If the source files aren’t located in the Python source directory, ignore
the warning, we’re probably running this from an installed based, in which
case we don’t need to check anything (this check is useful only for people
running directly from source).</p>
</dd></dl>

<dl class="function">
<dt id="beancount.parser.hashsrc.hash_parser_source_files">
<code class="sig-prename descclassname">beancount.parser.hashsrc.</code><code class="sig-name descname">hash_parser_source_files</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#beancount.parser.hashsrc.hash_parser_source_files" title="Permalink to this definition">¶</a></dt>
<dd><p>Compute a unique hash of the parser’s Python code in order to bake that into
the extension module. This is used at load-time to verify that the extension
module and the corresponding Python codes match each other. If not, it
issues a warning that you should rebuild your extension module.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>A string, the hexadecimal unique hash of relevant source code that should
trigger a recompilation.</p>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="module-beancount.parser.lexer">
<span id="beancount-parser-lexer"></span><h2>beancount.parser.lexer<a class="headerlink" href="#module-beancount.parser.lexer" title="Permalink to this headline">¶</a></h2>
<p>Beancount syntax lexer.</p>
<dl class="class">
<dt id="beancount.parser.lexer.LexBuilder">
<em class="property">class </em><code class="sig-prename descclassname">beancount.parser.lexer.</code><code class="sig-name descname">LexBuilder</code><a class="headerlink" href="#beancount.parser.lexer.LexBuilder" title="Permalink to this definition">¶</a></dt>
<dd><p>A builder used only for building lexer objects.</p>
<dl class="attribute">
<dt id="beancount.parser.lexer.LexBuilder.long_string_maxlines_default">
<code class="sig-name descname">long_string_maxlines_default</code><a class="headerlink" href="#beancount.parser.lexer.LexBuilder.long_string_maxlines_default" title="Permalink to this definition">¶</a></dt>
<dd><p>Number of lines for a string to trigger a
warning. This is meant to help users detecting dangling quotes in
their source.</p>
</dd></dl>

<dl class="method">
<dt id="beancount.parser.lexer.LexBuilder.ACCOUNT">
<code class="sig-name descname">ACCOUNT</code><span class="sig-paren">(</span><em class="sig-param">account_name</em><span class="sig-paren">)</span><a class="headerlink" href="#beancount.parser.lexer.LexBuilder.ACCOUNT" title="Permalink to this definition">¶</a></dt>
<dd><p>Process an ACCOUNT token.</p>
<p>This function attempts to reuse an existing account if one exists,
otherwise creates one on-demand.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>account_name</strong> – a str, the valid name of an account.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A string, the name of the account.</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="beancount.parser.lexer.LexBuilder.CURRENCY">
<code class="sig-name descname">CURRENCY</code><span class="sig-paren">(</span><em class="sig-param">currency_name</em><span class="sig-paren">)</span><a class="headerlink" href="#beancount.parser.lexer.LexBuilder.CURRENCY" title="Permalink to this definition">¶</a></dt>
<dd><p>Process a CURRENCY token.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>currency_name</strong> – the name of the currency.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A new currency object; for now, these are simply represented
as the currency name.</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="beancount.parser.lexer.LexBuilder.DATE">
<code class="sig-name descname">DATE</code><span class="sig-paren">(</span><em class="sig-param">year</em>, <em class="sig-param">month</em>, <em class="sig-param">day</em><span class="sig-paren">)</span><a class="headerlink" href="#beancount.parser.lexer.LexBuilder.DATE" title="Permalink to this definition">¶</a></dt>
<dd><p>Process a DATE token.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>year</strong> – integer year.</p></li>
<li><p><strong>month</strong> – integer month.</p></li>
<li><p><strong>day</strong> – integer day</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A new datetime object.</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="beancount.parser.lexer.LexBuilder.KEY">
<code class="sig-name descname">KEY</code><span class="sig-paren">(</span><em class="sig-param">ident</em><span class="sig-paren">)</span><a class="headerlink" href="#beancount.parser.lexer.LexBuilder.KEY" title="Permalink to this definition">¶</a></dt>
<dd><p>Process an identifier token.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>ident</strong> – a str, the name of the key string.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The link string itself. For now we don’t need to represent this by
an object.</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="beancount.parser.lexer.LexBuilder.LINK">
<code class="sig-name descname">LINK</code><span class="sig-paren">(</span><em class="sig-param">link</em><span class="sig-paren">)</span><a class="headerlink" href="#beancount.parser.lexer.LexBuilder.LINK" title="Permalink to this definition">¶</a></dt>
<dd><p>Process a LINK token.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>link</strong> – a str, the name of the string.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The link string itself. For now we don’t need to represent this by
an object.</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="beancount.parser.lexer.LexBuilder.NUMBER">
<code class="sig-name descname">NUMBER</code><span class="sig-paren">(</span><em class="sig-param">number</em><span class="sig-paren">)</span><a class="headerlink" href="#beancount.parser.lexer.LexBuilder.NUMBER" title="Permalink to this definition">¶</a></dt>
<dd><p>Process a NUMBER token. Convert into Decimal.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>number</strong> – a str, the number to be converted.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A Decimal instance built of the number string.</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="beancount.parser.lexer.LexBuilder.STRING">
<code class="sig-name descname">STRING</code><span class="sig-paren">(</span><em class="sig-param">string</em><span class="sig-paren">)</span><a class="headerlink" href="#beancount.parser.lexer.LexBuilder.STRING" title="Permalink to this definition">¶</a></dt>
<dd><p>Process a STRING token.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>string</strong> – the string to process.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The string. Nothing to be done or cleaned up. Eventually we might
do some decoding here.</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="beancount.parser.lexer.LexBuilder.TAG">
<code class="sig-name descname">TAG</code><span class="sig-paren">(</span><em class="sig-param">tag</em><span class="sig-paren">)</span><a class="headerlink" href="#beancount.parser.lexer.LexBuilder.TAG" title="Permalink to this definition">¶</a></dt>
<dd><p>Process a TAG token.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>tag</strong> – a str, the tag to be processed.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The tag string itself. For now we don’t need an object to represent
those; keeping it simple.</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="beancount.parser.lexer.LexBuilder.build_lexer_error">
<code class="sig-name descname">build_lexer_error</code><span class="sig-paren">(</span><em class="sig-param">message</em>, <em class="sig-param">exc_type=None</em><span class="sig-paren">)</span><a class="headerlink" href="#beancount.parser.lexer.LexBuilder.build_lexer_error" title="Permalink to this definition">¶</a></dt>
<dd><p>Build a lexer error and appends it to the list of pending errors.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>message</strong> – The message of the error.</p></li>
<li><p><strong>exc_type</strong> – An exception type, if an exception occurred.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="beancount.parser.lexer.LexBuilder.get_invalid_account">
<code class="sig-name descname">get_invalid_account</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#beancount.parser.lexer.LexBuilder.get_invalid_account" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the name of an invalid account placeholder.</p>
<p>When an account name is not deemed a valid one, replace it by
this account name. This can be overridden by the parser to
take into account the options.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>A string, the name of the root/type for invalid account names.</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="beancount.parser.lexer.LexBuilder.get_lexer_location">
<code class="sig-name descname">get_lexer_location</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#beancount.parser.lexer.LexBuilder.get_lexer_location" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="beancount.parser.lexer.LexerError">
<em class="property">class </em><code class="sig-prename descclassname">beancount.parser.lexer.</code><code class="sig-name descname">LexerError</code><span class="sig-paren">(</span><em class="sig-param">source</em>, <em class="sig-param">message</em>, <em class="sig-param">entry</em><span class="sig-paren">)</span><a class="headerlink" href="#beancount.parser.lexer.LexerError" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="beancount.parser.lexer.lex_iter">
<code class="sig-prename descclassname">beancount.parser.lexer.</code><code class="sig-name descname">lex_iter</code><span class="sig-paren">(</span><em class="sig-param">file</em>, <em class="sig-param">builder=None</em>, <em class="sig-param">encoding=None</em><span class="sig-paren">)</span><a class="headerlink" href="#beancount.parser.lexer.lex_iter" title="Permalink to this definition">¶</a></dt>
<dd><p>An iterator that yields all the tokens in the given file.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>file</strong> – A string, the filename to run the lexer on, or a file object.</p></li>
<li><p><strong>builder</strong> – A builder of your choice. If not specified, a LexBuilder is
used and discarded (along with its errors).</p></li>
<li><p><strong>encoding</strong> – A string (or None), the default encoding to use for strings.</p></li>
</ul>
</dd>
<dt class="field-even">Yields</dt>
<dd class="field-even"><p>Tuples of the token (a string), the matched text (a string), and the line
no (an integer).</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="beancount.parser.lexer.lex_iter_string">
<code class="sig-prename descclassname">beancount.parser.lexer.</code><code class="sig-name descname">lex_iter_string</code><span class="sig-paren">(</span><em class="sig-param">string</em>, <em class="sig-param">builder=None</em>, <em class="sig-param">encoding=None</em><span class="sig-paren">)</span><a class="headerlink" href="#beancount.parser.lexer.lex_iter_string" title="Permalink to this definition">¶</a></dt>
<dd><p>Parse an input string and print the tokens to an output file.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>input_string</strong> – a str or bytes, the contents of the ledger to be parsed.</p></li>
<li><p><strong>builder</strong> – A builder of your choice. If not specified, a LexBuilder is
used and discarded (along with its errors).</p></li>
<li><p><strong>encoding</strong> – A string (or None), the default encoding to use for strings.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A iterator on the string. See lex_iter() for details.</p>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="module-beancount.parser.options">
<span id="beancount-parser-options"></span><h2>beancount.parser.options<a class="headerlink" href="#module-beancount.parser.options" title="Permalink to this headline">¶</a></h2>
<p>Declaration of options and their default values.</p>
<dl class="function">
<dt id="beancount.parser.options.Opt">
<code class="sig-prename descclassname">beancount.parser.options.</code><code class="sig-name descname">Opt</code><span class="sig-paren">(</span><em class="sig-param">name</em>, <em class="sig-param">default_value</em>, <em class="sig-param">example_value=&lt;object object&gt;</em>, <em class="sig-param">converter=None</em>, <em class="sig-param">deprecated=False</em>, <em class="sig-param">alias=None</em><span class="sig-paren">)</span><a class="headerlink" href="#beancount.parser.options.Opt" title="Permalink to this definition">¶</a></dt>
<dd><p>Alternative constructor for OptDesc, with default values.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>name</strong> – See OptDesc.</p></li>
<li><p><strong>default_value</strong> – See OptDesc.</p></li>
<li><p><strong>example_value</strong> – See OptDesc.</p></li>
<li><p><strong>converter</strong> – See OptDesc.</p></li>
<li><p><strong>deprecated</strong> – See OptDesc.</p></li>
<li><p><strong>alias</strong> – See OptDesc.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>An instance of OptDesc.</p>
</dd>
</dl>
</dd></dl>

<dl class="class">
<dt id="beancount.parser.options.OptDesc">
<em class="property">class </em><code class="sig-prename descclassname">beancount.parser.options.</code><code class="sig-name descname">OptDesc</code><span class="sig-paren">(</span><em class="sig-param">name</em>, <em class="sig-param">default_value</em>, <em class="sig-param">example_value</em>, <em class="sig-param">converter</em>, <em class="sig-param">deprecated</em>, <em class="sig-param">alias</em><span class="sig-paren">)</span><a class="headerlink" href="#beancount.parser.options.OptDesc" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="class">
<dt id="beancount.parser.options.OptGroup">
<em class="property">class </em><code class="sig-prename descclassname">beancount.parser.options.</code><code class="sig-name descname">OptGroup</code><span class="sig-paren">(</span><em class="sig-param">description</em>, <em class="sig-param">options</em><span class="sig-paren">)</span><a class="headerlink" href="#beancount.parser.options.OptGroup" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="beancount.parser.options.get_account_types">
<code class="sig-prename descclassname">beancount.parser.options.</code><code class="sig-name descname">get_account_types</code><span class="sig-paren">(</span><em class="sig-param">options</em><span class="sig-paren">)</span><a class="headerlink" href="#beancount.parser.options.get_account_types" title="Permalink to this definition">¶</a></dt>
<dd><p>Extract the account type names from the parser’s options.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>options</strong> – a dict of ledger options.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>An instance of AccountTypes, that contains all the prefixes.</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="beancount.parser.options.get_current_accounts">
<code class="sig-prename descclassname">beancount.parser.options.</code><code class="sig-name descname">get_current_accounts</code><span class="sig-paren">(</span><em class="sig-param">options</em><span class="sig-paren">)</span><a class="headerlink" href="#beancount.parser.options.get_current_accounts" title="Permalink to this definition">¶</a></dt>
<dd><p>Return account names for the current earnings and conversion accounts.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>options</strong> – a dict of ledger options.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A tuple of 2 account objects, one for booking current earnings, and one
for current conversions.</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="beancount.parser.options.get_previous_accounts">
<code class="sig-prename descclassname">beancount.parser.options.</code><code class="sig-name descname">get_previous_accounts</code><span class="sig-paren">(</span><em class="sig-param">options</em><span class="sig-paren">)</span><a class="headerlink" href="#beancount.parser.options.get_previous_accounts" title="Permalink to this definition">¶</a></dt>
<dd><p>Return account names for the previous earnings, balances and conversion accounts.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>options</strong> – a dict of ledger options.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A tuple of 3 account objects, for booking previous earnings,
previous balances, and previous conversions.</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="beancount.parser.options.list_options">
<code class="sig-prename descclassname">beancount.parser.options.</code><code class="sig-name descname">list_options</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#beancount.parser.options.list_options" title="Permalink to this definition">¶</a></dt>
<dd><p>Produce a formatted text of the available options and their description.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>A string, formatted nicely to be printed in 80 columns.</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="beancount.parser.options.options_validate_booking_method">
<code class="sig-prename descclassname">beancount.parser.options.</code><code class="sig-name descname">options_validate_booking_method</code><span class="sig-paren">(</span><em class="sig-param">value</em><span class="sig-paren">)</span><a class="headerlink" href="#beancount.parser.options.options_validate_booking_method" title="Permalink to this definition">¶</a></dt>
<dd><p>Validate a booking method name.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>value</strong> – A string, the value provided as option.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The new value, converted, if the conversion is successful.</p>
</dd>
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><p><strong>ValueError</strong> – If the value is invalid.</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="beancount.parser.options.options_validate_boolean">
<code class="sig-prename descclassname">beancount.parser.options.</code><code class="sig-name descname">options_validate_boolean</code><span class="sig-paren">(</span><em class="sig-param">value</em><span class="sig-paren">)</span><a class="headerlink" href="#beancount.parser.options.options_validate_boolean" title="Permalink to this definition">¶</a></dt>
<dd><p>Validate a boolean option.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>value</strong> – A string, the value provided as option.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The new value, converted, if the conversion is successful.</p>
</dd>
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><p><strong>ValueError</strong> – If the value is invalid.</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="beancount.parser.options.options_validate_plugin">
<code class="sig-prename descclassname">beancount.parser.options.</code><code class="sig-name descname">options_validate_plugin</code><span class="sig-paren">(</span><em class="sig-param">value</em><span class="sig-paren">)</span><a class="headerlink" href="#beancount.parser.options.options_validate_plugin" title="Permalink to this definition">¶</a></dt>
<dd><p>Validate the plugin option.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>value</strong> – A string, the value provided as option.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The new value, converted, if the conversion is successful.</p>
</dd>
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><p><strong>ValueError</strong> – If the value is invalid.</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="beancount.parser.options.options_validate_processing_mode">
<code class="sig-prename descclassname">beancount.parser.options.</code><code class="sig-name descname">options_validate_processing_mode</code><span class="sig-paren">(</span><em class="sig-param">value</em><span class="sig-paren">)</span><a class="headerlink" href="#beancount.parser.options.options_validate_processing_mode" title="Permalink to this definition">¶</a></dt>
<dd><p>Validate the options processing mode.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>value</strong> – A string, the value provided as option.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The new value, converted, if the conversion is successful.</p>
</dd>
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><p><strong>ValueError</strong> – If the value is invalid.</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="beancount.parser.options.options_validate_tolerance">
<code class="sig-prename descclassname">beancount.parser.options.</code><code class="sig-name descname">options_validate_tolerance</code><span class="sig-paren">(</span><em class="sig-param">value</em><span class="sig-paren">)</span><a class="headerlink" href="#beancount.parser.options.options_validate_tolerance" title="Permalink to this definition">¶</a></dt>
<dd><p>Validate the tolerance option.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>value</strong> – A string, the value provided as option.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The new value, converted, if the conversion is successful.</p>
</dd>
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><p><strong>ValueError</strong> – If the value is invalid.</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="beancount.parser.options.options_validate_tolerance_map">
<code class="sig-prename descclassname">beancount.parser.options.</code><code class="sig-name descname">options_validate_tolerance_map</code><span class="sig-paren">(</span><em class="sig-param">value</em><span class="sig-paren">)</span><a class="headerlink" href="#beancount.parser.options.options_validate_tolerance_map" title="Permalink to this definition">¶</a></dt>
<dd><p>Validate an option with a map of currency/tolerance pairs in a string.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>value</strong> – A string, the value provided as option.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The new value, converted, if the conversion is successful.</p>
</dd>
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><p><strong>ValueError</strong> – If the value is invalid.</p>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="module-beancount.parser.parser">
<span id="id1"></span><h2>beancount.parser.parser<a class="headerlink" href="#module-beancount.parser.parser" title="Permalink to this headline">¶</a></h2>
<p>Beancount syntax parser.</p>
<p>IMPORTANT: The parser (and its grammar builder) produces “incomplete”
Transaction objects. This means that some of the data can be found missing from
the output of the parser and some of the data types vary slightly. Missing
components are replaced not by None, but by a special constant ‘NA’ which helps
diagnose problems if a user inadvertently attempts to work on an incomplete
posting instead of a complete one. Those incomplete entries are then run through
the “booking” routines which do two things simultaneously:</p>
<ol class="arabic simple">
<li><p>They find matching lots for reducing inventory positions, and</p></li>
<li><p>They interpolate missing numbers.</p></li>
</ol>
<p>In doing so they normalize the entries to “complete” entries by converting a
position/lot’s “cost” attribute from a CostSpec to a Cost. A Cost is similar to
an Amount in that it shares “number” and “currency” attributes, but also has a
label and a lot date. A CostSpec is similar to a Cost, but has all optional
data; it consists in a specification for matching against a particular inventory
lot.</p>
<p>Other parts of a posting may also be missing, not just parts of the cost.
Leaving out some parts of the input is used to invoke interpolation, to tell
Beancount to automatically compute the missing numbers (if possible).</p>
<p>Missing components will be set to the special value
“beancount.core.number.MISSING” until inventory booking and number interpolation
has been completed. The “MISSING” value should never appear in completed, loaded
transaction postings.</p>
<p>For instance, all of the units may be missing:</p>
<blockquote>
<div><p>INPUT: Assets:Account
posting.units = MISSING</p>
</div></blockquote>
<p>Or just the number of the units:</p>
<blockquote>
<div><p>INPUT: Assets:Account                    USD
posting.units = Amount(MISSING, “USD”)</p>
</div></blockquote>
<p>You must always specify the currency.</p>
<p>If a price annotation is simply absent, it appears as None:</p>
<blockquote>
<div><p>INPUT: Assets:Account                 2 MXN
posting.price = None</p>
</div></blockquote>
<p>However, you may indicate that there is a price but have Beancount compute it
automatically:</p>
<blockquote>
<div><p>INPUT: Assets:Account                 2 MXN &#64;
posting.price = Amount(MISSING, MISSING)</p>
</div></blockquote>
<p>Indicating the conversion currency is also possible (and recommended):</p>
<blockquote>
<div><p>INPUT: Assets:Account                 2 MXN &#64; USD
posting.price = Amount(MISSING, “USD”)</p>
</div></blockquote>
<p>If a cost specification is provided, a “cost” attribute it set but it does not
refer to a Cost instance (as in complete entries) but rather to a CostSpec
instance. Some of the fields of a CostSpec may be MISSING if they were not
specified in the input. For exammple:</p>
<blockquote>
<div><p>INPUT: Assets:Account  1 HOOL {100 # 5 USD}
posting.cost = CostSpec(Decimal(“100”), Decimal(“5”), “USD”, None, None, False))</p>
</div></blockquote>
<p>Note how we never consider the label of date override to be MISSING; this is
because those inputs are optional: A missing label is simply left unset in the
computed Cost, and a missing date override uses the date of the transaction
that contains the posting.</p>
<p>You can indicate that there is a total number to be filled in like this:</p>
<blockquote>
<div><p>INPUT: Assets:Account  1 HOOL {100 # USD}
posting.cost = CostSpec(Decimal(“100”), MISSING, “USD”, None, None, False))</p>
</div></blockquote>
<p>This is in contrast to the total value simple not being used:</p>
<blockquote>
<div><p>INPUT: Assets:Account  1 HOOL {100 USD}
posting.cost = CostSpec(Decimal(“100”), None, “USD”, None, None, False))</p>
</div></blockquote>
<p>Both per-unit and total numbers may be omitted as well, in which case, only the
number-per-unit portion of the CostSpec will appear as MISSING:</p>
<blockquote>
<div><p>INPUT: Assets:Account  1 HOOL {USD}
posting.cost = CostSpec(MISSING, None, “USD”, None, None, False))</p>
</div></blockquote>
<p>And furthermore, all the cost basis may be missing:</p>
<blockquote>
<div><p>INPUT: Assets:Account  1 HOOL {}
posting.cost = CostSpec(MISSING, None, MISSING, None, None, False))</p>
</div></blockquote>
<p>If you ask for the lots to be merged, you get this:</p>
<blockquote>
<div><p>INPUT: Assets:Account  1 HOOL {*}
posting.cost = CostSpec(MISSING, None, MISSING, None, None, True))</p>
</div></blockquote>
<p>The numbers have to be computed by Beancount, so we output this with MISSING
values.</p>
<p>Of course, you can provide only the non-basis informations, like just the date
or label:</p>
<blockquote>
<div><p>INPUT: Assets:Account  1 HOOL {2015-09-21}
posting.cost = CostSpec(MISSING, None, MISSING, date(2015, 9, 21), None, True)</p>
</div></blockquote>
<p>See the test beancount.parser.grammar_test.TestIncompleteInputs for examples and
corresponding expected values.</p>
<dl class="function">
<dt id="beancount.parser.parser.is_entry_incomplete">
<code class="sig-prename descclassname">beancount.parser.parser.</code><code class="sig-name descname">is_entry_incomplete</code><span class="sig-paren">(</span><em class="sig-param">entry</em><span class="sig-paren">)</span><a class="headerlink" href="#beancount.parser.parser.is_entry_incomplete" title="Permalink to this definition">¶</a></dt>
<dd><p>Detect the presence of elided amounts in Transactions.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>entries</strong> – A directive.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A boolean, true if there are some missing portions of any postings found.</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="beancount.parser.parser.is_posting_incomplete">
<code class="sig-prename descclassname">beancount.parser.parser.</code><code class="sig-name descname">is_posting_incomplete</code><span class="sig-paren">(</span><em class="sig-param">posting</em><span class="sig-paren">)</span><a class="headerlink" href="#beancount.parser.parser.is_posting_incomplete" title="Permalink to this definition">¶</a></dt>
<dd><p>Detect the presence of any elided amounts in a Posting.</p>
<p>If any of the possible amounts are missing, this returns True.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>entries</strong> – A directive.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A boolean, true if there are some missing portions of any postings found.</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="beancount.parser.parser.parse_doc">
<code class="sig-prename descclassname">beancount.parser.parser.</code><code class="sig-name descname">parse_doc</code><span class="sig-paren">(</span><em class="sig-param">expect_errors=False</em>, <em class="sig-param">allow_incomplete=False</em><span class="sig-paren">)</span><a class="headerlink" href="#beancount.parser.parser.parse_doc" title="Permalink to this definition">¶</a></dt>
<dd><p>Factory of decorators that parse the function’s docstring as an argument.</p>
<p>Note that the decorators thus generated only run the parser on the tests,
not the loader, so is no validation, balance checks, nor plugins applied to
the parsed text.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>expect_errors</strong> – A boolean or None, with the following semantics,
True: Expect errors and fail if there are none.
False: Expect no errors and fail if there are some.
None: Do nothing, no check.</p></li>
<li><p><strong>allow_incomplete</strong> – A boolean, if true, allow incomplete input. Otherwise
barf if the input would require interpolation. The default value is set
not to allow it because we want to minimize the features tests depend on.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A decorator for test functions.</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="beancount.parser.parser.parse_file">
<code class="sig-prename descclassname">beancount.parser.parser.</code><code class="sig-name descname">parse_file</code><span class="sig-paren">(</span><em class="sig-param">filename</em>, <em class="sig-param">**kw</em><span class="sig-paren">)</span><a class="headerlink" href="#beancount.parser.parser.parse_file" title="Permalink to this definition">¶</a></dt>
<dd><p>Parse a beancount input file and return Ledger with the list of
transactions and tree of accounts.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>filename</strong> – the name of the file to be parsed.</p></li>
<li><p><strong>kw</strong> – a dict of keywords to be applied to the C parser.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><dl class="simple">
<dt>A tuple of (</dt><dd><p>list of entries parsed in the file,
list of errors that were encountered during parsing, and
a dict of the option values that were parsed from the file.)</p>
</dd>
</dl>
</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="beancount.parser.parser.parse_many">
<code class="sig-prename descclassname">beancount.parser.parser.</code><code class="sig-name descname">parse_many</code><span class="sig-paren">(</span><em class="sig-param">string</em>, <em class="sig-param">level=0</em><span class="sig-paren">)</span><a class="headerlink" href="#beancount.parser.parser.parse_many" title="Permalink to this definition">¶</a></dt>
<dd><p>Parse a string with a snippet of Beancount input and replace vars from caller.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>string</strong> – A string with some Beancount input.</p></li>
<li><p><strong>level</strong> – The number of extra stacks to ignore.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A list of entries.</p>
</dd>
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><p><strong>AssertionError</strong> – If there are any errors.</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="beancount.parser.parser.parse_one">
<code class="sig-prename descclassname">beancount.parser.parser.</code><code class="sig-name descname">parse_one</code><span class="sig-paren">(</span><em class="sig-param">string</em><span class="sig-paren">)</span><a class="headerlink" href="#beancount.parser.parser.parse_one" title="Permalink to this definition">¶</a></dt>
<dd><p>Parse a string with single Beancount directive and replace vars from caller.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>string</strong> – A string with some Beancount input.</p></li>
<li><p><strong>level</strong> – The number of extra stacks to ignore.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A list of entries.</p>
</dd>
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><p><strong>AssertionError</strong> – If there are any errors.</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="beancount.parser.parser.parse_string">
<code class="sig-prename descclassname">beancount.parser.parser.</code><code class="sig-name descname">parse_string</code><span class="sig-paren">(</span><em class="sig-param">string</em>, <em class="sig-param">report_filename=None</em>, <em class="sig-param">**kw</em><span class="sig-paren">)</span><a class="headerlink" href="#beancount.parser.parser.parse_string" title="Permalink to this definition">¶</a></dt>
<dd><p>Parse a beancount input file and return Ledger with the list of
transactions and tree of accounts.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>string</strong> – A string, the contents to be parsed instead of a file’s.</p></li>
<li><p><strong>report_filename</strong> – A string, the source filename from which this string
has been extracted, if any. This is stored in the metadata of the
parsed entries.</p></li>
<li><p><strong>**kw</strong> – See parse.c. This function parses out ‘dedent’ which removes
whitespace from the front of the text (default is False).</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Same as the output of parse_file().</p>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="module-beancount.parser.printer">
<span id="beancount-parser-printer"></span><h2>beancount.parser.printer<a class="headerlink" href="#module-beancount.parser.printer" title="Permalink to this headline">¶</a></h2>
<p>Conversion from internal data structures to text.</p>
<dl class="class">
<dt id="beancount.parser.printer.EntryPrinter">
<em class="property">class </em><code class="sig-prename descclassname">beancount.parser.printer.</code><code class="sig-name descname">EntryPrinter</code><span class="sig-paren">(</span><em class="sig-param">dcontext=None</em>, <em class="sig-param">render_weight=False</em>, <em class="sig-param">min_width_account=None</em><span class="sig-paren">)</span><a class="headerlink" href="#beancount.parser.printer.EntryPrinter" title="Permalink to this definition">¶</a></dt>
<dd><p>A multi-method interface for printing all directive types.</p>
<dl>
<dt>Atributes:</dt><dd><p>dcontext: An instance of DisplayContext with which to render all the numbers.
render_weight: A boolean, true if we should render the weight of the postings</p>
<blockquote>
<div><p>as a comment, for debugging.</p>
</div></blockquote>
<p>min_width_account: An integer, the minimum width to leave for the account name.</p>
</dd>
</dl>
<dl class="method">
<dt id="beancount.parser.printer.EntryPrinter.Balance">
<code class="sig-name descname">Balance</code><span class="sig-paren">(</span><em class="sig-param">entry</em>, <em class="sig-param">oss</em><span class="sig-paren">)</span><a class="headerlink" href="#beancount.parser.printer.EntryPrinter.Balance" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="beancount.parser.printer.EntryPrinter.Close">
<code class="sig-name descname">Close</code><span class="sig-paren">(</span><em class="sig-param">entry</em>, <em class="sig-param">oss</em><span class="sig-paren">)</span><a class="headerlink" href="#beancount.parser.printer.EntryPrinter.Close" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="beancount.parser.printer.EntryPrinter.Commodity">
<code class="sig-name descname">Commodity</code><span class="sig-paren">(</span><em class="sig-param">entry</em>, <em class="sig-param">oss</em><span class="sig-paren">)</span><a class="headerlink" href="#beancount.parser.printer.EntryPrinter.Commodity" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="beancount.parser.printer.EntryPrinter.Custom">
<code class="sig-name descname">Custom</code><span class="sig-paren">(</span><em class="sig-param">entry</em>, <em class="sig-param">oss</em><span class="sig-paren">)</span><a class="headerlink" href="#beancount.parser.printer.EntryPrinter.Custom" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="beancount.parser.printer.EntryPrinter.Document">
<code class="sig-name descname">Document</code><span class="sig-paren">(</span><em class="sig-param">entry</em>, <em class="sig-param">oss</em><span class="sig-paren">)</span><a class="headerlink" href="#beancount.parser.printer.EntryPrinter.Document" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="beancount.parser.printer.EntryPrinter.Event">
<code class="sig-name descname">Event</code><span class="sig-paren">(</span><em class="sig-param">entry</em>, <em class="sig-param">oss</em><span class="sig-paren">)</span><a class="headerlink" href="#beancount.parser.printer.EntryPrinter.Event" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="beancount.parser.printer.EntryPrinter.META_IGNORE">
<code class="sig-name descname">META_IGNORE</code><em class="property"> = {'__automatic__', 'filename', 'lineno'}</em><a class="headerlink" href="#beancount.parser.printer.EntryPrinter.META_IGNORE" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="beancount.parser.printer.EntryPrinter.Note">
<code class="sig-name descname">Note</code><span class="sig-paren">(</span><em class="sig-param">entry</em>, <em class="sig-param">oss</em><span class="sig-paren">)</span><a class="headerlink" href="#beancount.parser.printer.EntryPrinter.Note" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="beancount.parser.printer.EntryPrinter.Open">
<code class="sig-name descname">Open</code><span class="sig-paren">(</span><em class="sig-param">entry</em>, <em class="sig-param">oss</em><span class="sig-paren">)</span><a class="headerlink" href="#beancount.parser.printer.EntryPrinter.Open" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="beancount.parser.printer.EntryPrinter.Pad">
<code class="sig-name descname">Pad</code><span class="sig-paren">(</span><em class="sig-param">entry</em>, <em class="sig-param">oss</em><span class="sig-paren">)</span><a class="headerlink" href="#beancount.parser.printer.EntryPrinter.Pad" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="beancount.parser.printer.EntryPrinter.Posting">
<code class="sig-name descname">Posting</code><span class="sig-paren">(</span><em class="sig-param">posting</em>, <em class="sig-param">oss</em><span class="sig-paren">)</span><a class="headerlink" href="#beancount.parser.printer.EntryPrinter.Posting" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="beancount.parser.printer.EntryPrinter.Price">
<code class="sig-name descname">Price</code><span class="sig-paren">(</span><em class="sig-param">entry</em>, <em class="sig-param">oss</em><span class="sig-paren">)</span><a class="headerlink" href="#beancount.parser.printer.EntryPrinter.Price" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="beancount.parser.printer.EntryPrinter.Query">
<code class="sig-name descname">Query</code><span class="sig-paren">(</span><em class="sig-param">entry</em>, <em class="sig-param">oss</em><span class="sig-paren">)</span><a class="headerlink" href="#beancount.parser.printer.EntryPrinter.Query" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="beancount.parser.printer.EntryPrinter.Transaction">
<code class="sig-name descname">Transaction</code><span class="sig-paren">(</span><em class="sig-param">entry</em>, <em class="sig-param">oss</em><span class="sig-paren">)</span><a class="headerlink" href="#beancount.parser.printer.EntryPrinter.Transaction" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="beancount.parser.printer.EntryPrinter.render_posting_strings">
<code class="sig-name descname">render_posting_strings</code><span class="sig-paren">(</span><em class="sig-param">posting</em><span class="sig-paren">)</span><a class="headerlink" href="#beancount.parser.printer.EntryPrinter.render_posting_strings" title="Permalink to this definition">¶</a></dt>
<dd><p>This renders the three components of a posting: the account and its optional
posting flag, the position, and finally, the weight of the position. The
purpose is to align these in the caller.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>posting</strong> – An instance of Posting, the posting to render.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><dl class="simple">
<dt>A tuple of</dt><dd><p>flag_account: A string, the account name including the flag.
position_str: A string, the rendered position string.
weight_str: A string, the rendered weight of the posting.</p>
</dd>
</dl>
</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="beancount.parser.printer.EntryPrinter.write_metadata">
<code class="sig-name descname">write_metadata</code><span class="sig-paren">(</span><em class="sig-param">meta</em>, <em class="sig-param">oss</em>, <em class="sig-param">prefix='  '</em><span class="sig-paren">)</span><a class="headerlink" href="#beancount.parser.printer.EntryPrinter.write_metadata" title="Permalink to this definition">¶</a></dt>
<dd><p>Write metadata to the file object, excluding filename and line number.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>meta</strong> – A dict that contains the metadata for this directive.</p></li>
<li><p><strong>oss</strong> – A file object to write to.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="function">
<dt id="beancount.parser.printer.align_position_strings">
<code class="sig-prename descclassname">beancount.parser.printer.</code><code class="sig-name descname">align_position_strings</code><span class="sig-paren">(</span><em class="sig-param">strings</em><span class="sig-paren">)</span><a class="headerlink" href="#beancount.parser.printer.align_position_strings" title="Permalink to this definition">¶</a></dt>
<dd><p>A helper used to align rendered amounts positions to their first currency
character (an uppercase letter). This class accepts a list of rendered
positions and calculates the necessary width to render them stacked in a
column so that the first currency word aligns. It does not go beyond that
(further currencies, e.g. for the price or cost, are not aligned).</p>
<p>This is perhaps best explained with an example. The following positions will
be aligned around the column marked with ‘^’:</p>
<blockquote>
<div><blockquote>
<div><blockquote>
<div><dl class="simple">
<dt>45 HOOL {504.30 USD}</dt><dd><p>4 HOOL {504.30 USD, 2014-11-11}</p>
</dd>
</dl>
</div></blockquote>
<p>9.95 USD</p>
</div></blockquote>
<dl class="simple">
<dt>-22473.32 CAD &#64; 1.10 USD</dt><dd><p>^</p>
</dd>
</dl>
</div></blockquote>
<p>Strings without a currency character will be rendered flush left.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>strings</strong> – A list of rendered position or amount strings.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A pair of a list of aligned strings and the width of the aligned strings.</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="beancount.parser.printer.format_entry">
<code class="sig-prename descclassname">beancount.parser.printer.</code><code class="sig-name descname">format_entry</code><span class="sig-paren">(</span><em class="sig-param">entry</em>, <em class="sig-param">dcontext=None</em>, <em class="sig-param">render_weights=False</em><span class="sig-paren">)</span><a class="headerlink" href="#beancount.parser.printer.format_entry" title="Permalink to this definition">¶</a></dt>
<dd><p>Format an entry into a string in the same input syntax the parser accepts.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>entry</strong> – An entry instance.</p></li>
<li><p><strong>dcontext</strong> – An instance of DisplayContext used to format the numbers.</p></li>
<li><p><strong>render_weights</strong> – A boolean, true to render the weights for debugging.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A string, the formatted entry.</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="beancount.parser.printer.format_error">
<code class="sig-prename descclassname">beancount.parser.printer.</code><code class="sig-name descname">format_error</code><span class="sig-paren">(</span><em class="sig-param">error</em><span class="sig-paren">)</span><a class="headerlink" href="#beancount.parser.printer.format_error" title="Permalink to this definition">¶</a></dt>
<dd><p>Given an error objects, return a formatted string for it.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>error</strong> – a namedtuple objects representing an error. It has to have an
‘entry’ attribute that may be either a single directive object or a
list of directive objects.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A string, the errors rendered.</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="beancount.parser.printer.print_entries">
<code class="sig-prename descclassname">beancount.parser.printer.</code><code class="sig-name descname">print_entries</code><span class="sig-paren">(</span><em class="sig-param">entries</em>, <em class="sig-param">dcontext=None</em>, <em class="sig-param">render_weights=False</em>, <em class="sig-param">file=None</em>, <em class="sig-param">prefix=None</em><span class="sig-paren">)</span><a class="headerlink" href="#beancount.parser.printer.print_entries" title="Permalink to this definition">¶</a></dt>
<dd><p>A convenience function that prints a list of entries to a file.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>entries</strong> – A list of directives.</p></li>
<li><p><strong>dcontext</strong> – An instance of DisplayContext used to format the numbers.</p></li>
<li><p><strong>render_weights</strong> – A boolean, true to render the weights for debugging.</p></li>
<li><p><strong>file</strong> – An optional file object to write the entries to.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="beancount.parser.printer.print_entry">
<code class="sig-prename descclassname">beancount.parser.printer.</code><code class="sig-name descname">print_entry</code><span class="sig-paren">(</span><em class="sig-param">entry</em>, <em class="sig-param">dcontext=None</em>, <em class="sig-param">render_weights=False</em>, <em class="sig-param">file=None</em><span class="sig-paren">)</span><a class="headerlink" href="#beancount.parser.printer.print_entry" title="Permalink to this definition">¶</a></dt>
<dd><p>A convenience function that prints a single entry to a file.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>entry</strong> – A directive entry.</p></li>
<li><p><strong>dcontext</strong> – An instance of DisplayContext used to format the numbers.</p></li>
<li><p><strong>render_weights</strong> – A boolean, true to render the weights for debugging.</p></li>
<li><p><strong>file</strong> – An optional file object to write the entries to.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="beancount.parser.printer.print_error">
<code class="sig-prename descclassname">beancount.parser.printer.</code><code class="sig-name descname">print_error</code><span class="sig-paren">(</span><em class="sig-param">error</em>, <em class="sig-param">file=None</em><span class="sig-paren">)</span><a class="headerlink" href="#beancount.parser.printer.print_error" title="Permalink to this definition">¶</a></dt>
<dd><p>A convenience function that prints a single error to a file.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>error</strong> – An error object.</p></li>
<li><p><strong>file</strong> – An optional file object to write the errors to.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="beancount.parser.printer.print_errors">
<code class="sig-prename descclassname">beancount.parser.printer.</code><code class="sig-name descname">print_errors</code><span class="sig-paren">(</span><em class="sig-param">errors</em>, <em class="sig-param">file=None</em>, <em class="sig-param">prefix=None</em><span class="sig-paren">)</span><a class="headerlink" href="#beancount.parser.printer.print_errors" title="Permalink to this definition">¶</a></dt>
<dd><p>A convenience function that prints a list of errors to a file.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>errors</strong> – A list of errors.</p></li>
<li><p><strong>file</strong> – An optional file object to write the errors to.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="beancount.parser.printer.render_source">
<code class="sig-prename descclassname">beancount.parser.printer.</code><code class="sig-name descname">render_source</code><span class="sig-paren">(</span><em class="sig-param">meta</em><span class="sig-paren">)</span><a class="headerlink" href="#beancount.parser.printer.render_source" title="Permalink to this definition">¶</a></dt>
<dd><p>Render the source for errors in a way that it will be both detected by
Emacs and align and rendered nicely.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>meta</strong> – A dict with the metadata.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A string, rendered to be interpretable as a message location for Emacs or
other editors.</p>
</dd>
</dl>
</dd></dl>

</div>
</div>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<p class="logo">
  <a href="../index.html">
    <img class="logo" src="../_static/logo.png" alt="Logo"/>
    
    <h1 class="logo logo-name">Fava</h1>
    
  </a>
</p>



<p class="blurb">Web interface for <a href="http://furius.ca/beancount/">Beancount</a></p>








<h3>Navigation</h3>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../usage.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../changelog.html">Changelog</a></li>
<li class="toctree-l1"><a class="reference internal" href="../development.html">Development</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../api.html">API Documentation</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="fava.html">fava</a></li>
<li class="toctree-l2"><a class="reference internal" href="fava.core.html">fava.core</a></li>
<li class="toctree-l2"><a class="reference internal" href="fava.ext.html">fava.ext</a></li>
<li class="toctree-l2"><a class="reference internal" href="fava.ext.portfolio_list.html">fava.ext.portfolio_list</a></li>
<li class="toctree-l2"><a class="reference internal" href="fava.help.html">fava.help</a></li>
<li class="toctree-l2"><a class="reference internal" href="fava.util.html">fava.util</a></li>
<li class="toctree-l2"><a class="reference internal" href="beancount.html">beancount</a></li>
<li class="toctree-l2"><a class="reference internal" href="beancount.core.html">beancount.core</a></li>
<li class="toctree-l2"><a class="reference internal" href="beancount.ingest.html">beancount.ingest</a></li>
<li class="toctree-l2"><a class="reference internal" href="beancount.ingest.importers.html">beancount.ingest.importers</a></li>
<li class="toctree-l2"><a class="reference internal" href="beancount.ingest.importers.mixins.html">beancount.ingest.importers.mixins</a></li>
<li class="toctree-l2"><a class="reference internal" href="beancount.ops.html">beancount.ops</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">beancount.parser</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#module-beancount.parser._parser">beancount.parser._parser</a></li>
<li class="toctree-l3"><a class="reference internal" href="#module-beancount.parser.booking">beancount.parser.booking</a></li>
<li class="toctree-l3"><a class="reference internal" href="#module-beancount.parser.booking_full">beancount.parser.booking_full</a></li>
<li class="toctree-l3"><a class="reference internal" href="#module-beancount.parser.booking_method">beancount.parser.booking_method</a></li>
<li class="toctree-l3"><a class="reference internal" href="#module-beancount.parser.cmptest">beancount.parser.cmptest</a></li>
<li class="toctree-l3"><a class="reference internal" href="#module-beancount.parser.grammar">beancount.parser.grammar</a></li>
<li class="toctree-l3"><a class="reference internal" href="#module-beancount.parser.hashsrc">beancount.parser.hashsrc</a></li>
<li class="toctree-l3"><a class="reference internal" href="#module-beancount.parser.lexer">beancount.parser.lexer</a></li>
<li class="toctree-l3"><a class="reference internal" href="#module-beancount.parser.options">beancount.parser.options</a></li>
<li class="toctree-l3"><a class="reference internal" href="#module-beancount.parser.parser">beancount.parser.parser</a></li>
<li class="toctree-l3"><a class="reference internal" href="#module-beancount.parser.printer">beancount.parser.printer</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="beancount.plugins.html">beancount.plugins</a></li>
<li class="toctree-l2"><a class="reference internal" href="beancount.prices.html">beancount.prices</a></li>
<li class="toctree-l2"><a class="reference internal" href="beancount.prices.sources.html">beancount.prices.sources</a></li>
<li class="toctree-l2"><a class="reference internal" href="beancount.query.html">beancount.query</a></li>
<li class="toctree-l2"><a class="reference internal" href="beancount.reports.html">beancount.reports</a></li>
<li class="toctree-l2"><a class="reference internal" href="beancount.scripts.html">beancount.scripts</a></li>
<li class="toctree-l2"><a class="reference internal" href="beancount.tools.html">beancount.tools</a></li>
<li class="toctree-l2"><a class="reference internal" href="beancount.utils.html">beancount.utils</a></li>
<li class="toctree-l2"><a class="reference internal" href="beancount.web.html">beancount.web</a></li>
</ul>
</li>
</ul>


<hr />
<ul>
    
    <li class="toctree-l1"><a href="https://github.com/beancount/fava">fava @ GitHub</a></li>
    
    <li class="toctree-l1"><a href="https://gitter.im/beancount/fava">Chat</a></li>
    
    <li class="toctree-l1"><a href="https://github.com/beancount/fava/issues">Issue Tracker</a></li>
    
</ul>

        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2016, Dominik Aumayr.
      
      |
      <a href="../_sources/api/beancount.parser.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>